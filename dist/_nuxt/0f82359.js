(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{193:function(t,e,n){"use strict";var r=n(1),o=n(98),c=n.n(o),l=n(277),d=n.n(l);r.default.use(c.a,{locale:d.a})},196:function(t,e,n){"use strict";(function(t){var r=n(5),o=n(3),c=(n(22),n(36),n(98));e.a=function(e,n){var l=e.app,d=l.$auth.strategy.token.get(),f=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){var o,f,content,data,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=!1,content={},data=void 0!==n.data?n.data:{},v={Authorization:d},void 0!==n.headers&&(h=n.headers.contentType,v["Content-Type"]="formData"===h?"multipart/form-data":"application/x-www-form-urlencoded"),void 0!==n.baseURL?l.$axios.setBaseURL(n.baseURL):l.$axios.setBaseURL(l.$config.baseURL),e.next=8,l.$axios((o={method:n.method,url:n.url},Object(r.a)(o,"get"===n.method?"params":"data",data),Object(r.a)(o,"headers",v),o)).then((function(t){200!==t.status&&201!==t.status||("message"in n&&"success"in n.message&&Object(c.Notification)({type:"success",message:n.message.success}),content.data=t.data),f=!0})).catch((function(t){console.log(t.response),Object(c.Notification)({type:"error",dangerouslyUseHTMLString:!0,message:"string"==typeof t.response.data?"<b>".concat(t.response.data," <br /> Error code: ").concat(t.response.status,"</b>"):"Sorry, Something went wrong. <br /> Error: ".concat(t.response.status)})})).then((function(){void 0!==n.baseURL&&l.$axios.setBaseURL("production"===t.env.APP_ENV?t.env.PUBLIC_URL+t.env.BASE_URL:t.env.LOCAL_URL+t.env.BASE_URL)}));case 8:return e.abrupt("return",{success:f,content:content});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n("sender",f)}}).call(this,n(164))},197:function(t,e,n){"use strict";n(10),n(15);e.a=function(t,e){t.app;e("cg",(function(param){console.group(param.title),"error"!==param.type?param.logs.forEach((function(t){console.log(t)})):console.error(param.logs),console.groupEnd()}))}},236:function(t,e,n){var content=n(341);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("b7e08482",content,!0,{sourceMap:!1})},237:function(t,e,n){var content=n(343);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("178f2201",content,!0,{sourceMap:!1})},238:function(t,e,n){var content=n(345);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("67a12fb7",content,!0,{sourceMap:!1})},239:function(t,e,n){var content=n(347);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("53305c46",content,!0,{sourceMap:!1})},240:function(t,e,n){var content=n(349);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("524d954e",content,!0,{sourceMap:!1})},241:function(t,e,n){var content=n(351);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("6befd006",content,!0,{sourceMap:!1})},242:function(t,e,n){var content=n(353);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("509b1515",content,!0,{sourceMap:!1})},243:function(t,e,n){var content=n(355);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("568c20eb",content,!0,{sourceMap:!1})},244:function(t,e,n){var content=n(357);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("3c03f432",content,!0,{sourceMap:!1})},245:function(t,e,n){var content=n(359);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("379c22ad",content,!0,{sourceMap:!1})},246:function(t,e,n){var content=n(361);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("4cbc0134",content,!0,{sourceMap:!1})},273:function(t,e,n){"use strict";n.r(e);var r={},o=(n(346),n(6)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[t._v("\n  Ekballo\n  "),n("span",{staticClass:"second"},[t._v("\n    Chat\n  ")])])}],!1,null,"7bf7bdd6",null);e.default=component.exports},279:function(t,e,n){"use strict";n(19),n(14),n(18),n(25),n(15),n(26);var r=n(5),o=(n(139),n(10),n(36),n(13));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={middleware:"auth",data:function(){return{eventSource:null,visibility:{profile:!1},disabled:{btn:{logout:!1}}}},computed:l({},Object(o.c)({settings:"settings/settings",theme:"settings/theme",pages:"pages/pages",notifications:"notifications/notifications",isMobile:"settings/isMobile",navIsCollapsed:"settings/navIsCollapsed",currentConversation:"settings/currentConversation"})),watch:{"$route.params":{handler:function(t,e){if(null!==this.eventSource&&(this.eventSource.close(),console.log("Event closed")),"id"in t&&0!==this.pages.length){var n=l({},this.pages.find((function(p){return p.id===parseInt(t.id)})));this.setupStream(n.page_id),console.log("Event started",n.page_id)}},deep:!0}},mounted:function(){var t=this;this.setDeviceType(),this.getClientStatuses(),this.getUsers(),this.$root.$on("restart-stream",(function(e){if(null!==t.eventSource&&t.eventSource.close(),"psid"in t.$route.params){var n=l({},t.pages.find((function(p){return p.id===parseInt(t.$route.params.id)})));t.setupStream(n.page_id,e)}}))},methods:l(l({},Object(o.b)({getUsers:"users/users",getClientStatuses:"statuses/get",updateNotification:"notifications/updateNotification",setDeviceType:"settings/setDeviceType",toggleNavCollapse:"settings/toggleNavCollapse"})),{},{handleDropdownCommand:function(t){var e=this;"logout"===t&&this.$auth.logout().then((function(t){e.$router.push("/")}))},setupStream:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!==EventSource?(this.eventSource=new EventSource("".concat(this.$config.baseURL,"noti/").concat(t)),this.eventSource.addEventListener("message",(function(t){""!==t.data&&t.data!==e.notifications&&"undefined"!==t.data&&!1!==n&&(e.updateNotification(t.data),e.$root.$emit("new-message",t.data),console.group("Event"),console.log("Event",t),console.log("Event data",JSON.parse(t.data)),console.log("Event notifications",e.notifications),console.groupEnd())}),!1),this.eventSource.addEventListener("error",(function(t){t.readyState===EventSource.CLOSED&&(console.log("Event was closed"),console.log(EventSource))}),!1)):this.$notify({title:"SSE Error",message:"Sorry, your browser dose not support server-sent events..."})},handleLogout:function(){var t=this;this.disabled.btn.logout=!0,this.$auth.logout().then((function(e){t.disabled.btn.logout=!1,t.$router.push("/")}))}})},f=d,v=(n(340),n(342),n(344),n(6)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.isMobile?"wrap-mobile-layout":""},[n("el-container",{staticStyle:{height:"100vh"}},[n("el-aside",{class:"aside "+(t.navIsCollapsed?"collapsed":""),staticStyle:{"background-color":"#1f91f2"},attrs:{width:(t.navIsCollapsed?"0":"300")+"px"}},[n("div",{staticStyle:{background:"#0003",height:"50px","line-height":"50px","padding-top":"10px",position:"relative"}},[t.isMobile?n("div",[n("span",{class:"txt-section "+(t.navIsCollapsed?"hide":"")},[t._v("\n            "+t._s(void 0!==t.$route.params.id?"Conversations":"Pages")+"\n          ")]),t._v(" "),n("button",{staticClass:"btn-profile",attrs:{type:"button"},on:{click:function(e){t.visibility.profile=!t.visibility.profile}}},[n("i",{class:t.visibility.profile?"el-icon-close":"el-icon-user-solid"})]),t._v(" "),n("div",{class:"wrap-profile "+(t.visibility.profile?"shown":"")},[n("div",{staticClass:"item"},[n("div",{staticClass:"txt-username"},[t._v("\n                "+t._s(t.$auth.user.name)+"\n              ")])]),t._v(" "),n("div",{staticClass:"item"},[n("button",{staticClass:"btn-logout",attrs:{type:"button",disabled:t.disabled.btn.logout},on:{click:t.handleLogout}},[n("i",{class:" "+(t.disabled.btn.logout?"el-icon-loading":"el-icon-switch-button")}),t._v(" Â  "+t._s(t.disabled.btn.logout?"Logging out.":"Logout")+"\n              ")])])])]):n("Logo")],1),t._v(" "),3===t.$auth.user.user_role_id?n("NavUser"):n("NavAdmin")],1),t._v(" "),n("el-container",[n("el-header",{class:"header "+("light"===t.settings.visualMode?"":"dark")},[t.isMobile?n("div",{staticClass:"mobile-header"},[n("div",{class:"txt-conversation "+(t.navIsCollapsed?"":"hide")},[t._v("\n            "+t._s(t.currentConversation)+"\n          ")]),t._v(" "),n("button",{staticClass:"btn-mobile",attrs:{type:"button"},on:{click:function(e){return t.toggleNavCollapse()}}},[n("i",{class:t.navIsCollapsed?"el-icon-s-unfold":"el-icon-arrow-left"})]),t._v(" "),t.$route.params.psid?n("span",{staticStyle:{float:"right"}},[n("ElmDropdownStatus")],1):t._e()]):n("div",[1===t.$auth.user.user_role_id?n("span",{staticStyle:{color:"#e6a23c",float:"left"}},[t._v("Super Admin Â ")]):t._e(),t._v(" "),n("ElmDropdownTopBarPage"),t._v(" "),t.$route.params.psid?n("span",{staticStyle:{float:"left"}},[n("ElmDropdownStatus")],1):t._e(),t._v("\n\n          "+t._s(t.$auth.user.name)+"\n          "),t._v(" "),n("ElmDropdownLogout")],1)]),t._v(" "),n("el-main",{class:"main "+t.theme},[n("Nuxt")],1)],1)],1)],1)}),[],!1,null,"03a269ab",null);e.a=component.exports;installComponents(component,{Logo:n(273).default,NavUser:n(467).default,NavAdmin:n(471).default,ElmDropdownStatus:n(472).default,ElmDropdownTopBarPage:n(473).default,ElmDropdownLogout:n(474).default})},280:function(t,e,n){"use strict";n(28),n(165);var r={auth:"guest",computed:{pageName:function(){var t=this.$route.path.split("/");return t[2]}}},o=(n(360),n(6)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",height:"100vh",background:"#1f91f2"}},[n("el-row",{attrs:{gutter:0}},[n("el-col",{attrs:{span:24,offset:0}},[n("div",{staticClass:"page-name"},[n("div",{staticClass:"title"},[t._v("\n          Welcome "),"login"===t.pageName?n("span",[t._v("back")]):t._e(),t._v(" to Ekballo Chat!\n        ")]),t._v(" "),n("div",{staticClass:"sub-title"},[t._v("\n          Please continue to "+t._s(t.pageName)+"\n        ")])])])],1),t._v(" "),n("el-row",{attrs:{gutter:0}},[n("el-col",{attrs:{span:20,offset:2}},[n("div",{staticClass:"wrap"},[n("Nuxt")],1)])],1)],1)}),[],!1,null,"2a0cadf8",null);e.a=component.exports},281:function(t,e,n){"use strict";var r={},o=n(6),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"padding-top":"50px"}},[n("Logo"),t._v(" "),n("div",{staticStyle:{"text-align":"center","margin-top":"50px"}},[n("Nuxt")],1)],1)}),[],!1,null,null,null);e.a=component.exports;installComponents(component,{Logo:n(273).default})},288:function(t,e,n){n(289),t.exports=n(290)},314:function(t,e,n){"use strict";n.r(e),e.default=function(t){t.$auth.loggedIn&&(t.$auth.loggedIn&&1===t.$auth.user.user_role_id?t.redirect("/admin/dashboard"):t.redirect("/pages"))}},315:function(t,e,n){"use strict";n.r(e),e.default=function(t){t.$auth.loggedIn&&(t.$auth.loggedIn&&1===t.$auth.user.user_role_id?t.redirect("/admin/dashboard"):t.redirect("/pages"))}},333:function(t,e,n){var content=n(334);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("c3ae2b30",content,!0,{sourceMap:!1})},334:function(t,e,n){var r=n(23),o=n(235),c=n(335),l=n(336),d=n(337),f=n(338),v=n(339),h=r(!1),m=o(c),x=o(l),w=o(d),y=o(f),_=o(v);h.push([t.i,'@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+m+') format("woff2");unicode-range:U+0460-052f,U+1c80-1c88,U+20b4,U+2de0-2dff,U+a640-a69f,U+fe2e-fe2f}@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+x+') format("woff2");unicode-range:U+0400-045f,U+0490-0491,U+04b0-04b1,U+2116}@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+w+') format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01a0-01a1,U+01af-01b0,U+1ea0-1ef9,U+20ab}@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+y+') format("woff2");unicode-range:U+0100-024f,U+0259,U+1e??,U+2020,U+20a0-20ab,U+20ad-20cf,U+2113,U+2c60-2c7f,U+a720-a7ff}@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+_+') format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}',""]),t.exports=h},335:function(t,e,n){t.exports=n.p+"fonts/Nunito-400-cyrillic-ext1.ea59f4e.woff2"},336:function(t,e,n){t.exports=n.p+"fonts/Nunito-400-cyrillic2.905568d.woff2"},337:function(t,e,n){t.exports=n.p+"fonts/Nunito-400-vietnamese3.6fcc161.woff2"},338:function(t,e,n){t.exports=n.p+"fonts/Nunito-400-latin-ext4.6463a96.woff2"},339:function(t,e,n){t.exports=n.p+"fonts/Nunito-400-latin5.6c056c5.woff2"},340:function(t,e,n){"use strict";n(236)},341:function(t,e,n){var r=n(23)(!1);r.push([t.i,"body{font-family:Nunito,sans-serif;color:#454545;font-size:16px;margin:0}",""]),t.exports=r},342:function(t,e,n){"use strict";n(237)},343:function(t,e,n){var r=n(23)(!1);r.push([t.i,"",""]),t.exports=r},344:function(t,e,n){"use strict";n(238)},345:function(t,e,n){var r=n(23)(!1);r.push([t.i,".aside[data-v-03a269ab]{background:#1f91f2;background:linear-gradient(135deg,#1f91f2,#00549c);width:60px;transition:all .4s ease-in-out}.aside.collapsed[data-v-03a269ab]{width:250px}.header[data-v-03a269ab]{position:relative;line-height:60px;text-align:right;background:#eee;transition:all .3s ease-in-out;color:#777}.header.dark[data-v-03a269ab]{background:#454545;background:linear-gradient(135deg,#454545,#333);color:#ccc}.header .btn-mobile[data-v-03a269ab]{width:60px;height:60px;line-height:60px;color:#1f91f2;padding:0 10px;font-size:22px;text-align:center;background:none;border-width:0;position:absolute;top:0;left:0}.header .btn-mobile[data-v-03a269ab]:active{background:hsla(0,0%,100%,.31373)}.header .txt-conversation[data-v-03a269ab]{position:absolute;left:60px;top:0;text-align:left;visibility:visible;opacity:1}.header .txt-conversation.hide[data-v-03a269ab]{visibility:hidden;opacity:0;width:0}.main[data-v-03a269ab]{background:#fff;transition:all .3s ease-in-out;max-height:calc(100vh - 60px);overflow-y:auto}.main.dark[data-v-03a269ab]{background:linear-gradient(135deg,#777,#3b3b3b);box-shadow:inset 10px 0 20px rgba(0,0,0,.15)}.txt-section[data-v-03a269ab]{display:inline-block;position:absolute;top:0;left:0;height:60px;line-height:60px;padding-left:10px;color:#fff;visibility:visible;opacity:1;transition:all .5s ease-in-out;font-weight:900}.txt-section.hide[data-v-03a269ab]{visibility:hidden;opacity:0}.mobile-header[data-v-03a269ab]{width:100%;min-width:300px;overflow:hidden}.wrap-mobile-layout[data-v-03a269ab]{width:100vw;height:100vh;overflow:hidden}.btn-profile[data-v-03a269ab]{position:absolute;top:0;right:0;height:60px;width:60px;border-width:0;background:none;font-size:18px;color:#fff}.btn-profile[data-v-03a269ab]:active{background:hsla(0,0%,100%,.31373)}.wrap-profile[data-v-03a269ab]{background:rgba(0,0,0,.25);position:absolute;top:100%;left:0;width:100%;visibility:hidden;opacity:0;transition:all .4s ease-in-out;height:calc(100vh - 60px);z-index:99999999999999}.wrap-profile.shown[data-v-03a269ab]{visibility:visible;opacity:1}.wrap-profile .item[data-v-03a269ab]{padding:10px;background:#1f91f2;color:#fff}.wrap-profile .item .txt-username[data-v-03a269ab]{text-align:center;border-bottom:1px solid hsla(0,0%,100%,.12549)}.btn-logout[data-v-03a269ab]{border:0;background:none;color:#fff;width:100%;text-align:left;height:50px;line-height:50px}.btn-logout[data-v-03a269ab]:active,.btn-logout[data-v-03a269ab]:disabled{background:hsla(0,0%,100%,.31373)}",""]),t.exports=r},346:function(t,e,n){"use strict";n(239)},347:function(t,e,n){var r=n(23)(!1);r.push([t.i,".logo[data-v-7bf7bdd6]{color:#fff;color:#1f91f2;height:20px;line-height:20px;padding:10px;text-align:center;font-weight:900;font-size:20px;text-transform:uppercase;border-radius:8px}.logo .second[data-v-7bf7bdd6]{display:inline-block;padding:5px 10px;background:#1f91f2;border-radius:4px;color:#fff;margin-top:-5px}",""]),t.exports=r},348:function(t,e,n){"use strict";n(240)},349:function(t,e,n){var r=n(23)(!1);r.push([t.i,".wrap-contacts[data-v-62c65e33]{height:40px;line-height:40px;color:#fff;width:calc(100% - 40px);min-width:260px;margin-left:10px;padding:0 10px;border-radius:8px;margin-bottom:5px;margin-top:10px;cursor:pointer;font-weight:bolder;transition:all .2s ease-in-out;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.wrap-contacts[data-v-62c65e33]:hover{background:rgba(0,0,0,.1);padding-left:20px;padding-right:0}.wrap-contacts[data-v-62c65e33]:first-of-type{margin-top:20px}.wrap-contacts.active[data-v-62c65e33]{background:#fff;color:#1f91f2}",""]),t.exports=r},350:function(t,e,n){"use strict";n(241)},351:function(t,e,n){var r=n(23)(!1);r.push([t.i,'.wrap-conversations[data-v-2430bc24]{height:calc(100vh - 162px)}.wrap-fb-user[data-v-2430bc24]{height:80px;line-height:80px;padding-left:15px;padding-right:10px;color:#999;border-bottom:1px solid #f5f5f5;cursor:pointer;position:relative}.wrap-fb-user[data-v-2430bc24],.wrap-fb-user[data-v-2430bc24]:before{background:#fff;transition:all .2s ease-in-out}.wrap-fb-user[data-v-2430bc24]:before{content:"";width:5px;height:60px;position:absolute;border-radius:0 5px 5px 0;left:-5px;top:10px}.wrap-fb-user[data-v-2430bc24]:hover{background:#fafafa;padding-left:20px}.wrap-fb-user[data-v-2430bc24]:hover:before{background:#ccc;left:0}.wrap-fb-user.unread[data-v-2430bc24]{color:#777;font-weight:bolder}.wrap-fb-user.active[data-v-2430bc24]{background:#f5f5f5;padding-left:20px}.wrap-fb-user.active[data-v-2430bc24]:before{left:0;background:#1f91f2}.wrap-fb-user .name[data-v-2430bc24]{float:left;width:150px;height:26px;line-height:26px;margin-top:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.wrap-fb-user .count[data-v-2430bc24]{width:20px;height:20px;line-height:20px;text-align:center;margin-top:10px;float:right;color:#fff;background:#f56c6c;border-radius:11px;font-weight:bolder;bottom:10px}.wrap-fb-user .count[data-v-2430bc24],.wrap-fb-user .time[data-v-2430bc24]{font-size:10px;position:absolute;right:10px}.wrap-fb-user .time[data-v-2430bc24]{top:10px;height:26px;line-height:26px;color:#ccc}.wrap-fb-user .snippet[data-v-2430bc24]{width:calc(100% - 30px);height:44px;line-height:44px;font-size:14px;color:#999;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.wrap-fb-user.dark[data-v-2430bc24]{color:#777;background:#454545;border-bottom:1px solid #777}.wrap-fb-user.dark .name[data-v-2430bc24]{color:#ccc}.btn-back[data-v-2430bc24]{width:calc(100% - 40px);margin-left:20px;margin-bottom:7px}.btn-back.dark[data-v-2430bc24]{background:#454545;border-color:#454545}',""]),t.exports=r},352:function(t,e,n){"use strict";n(242)},353:function(t,e,n){var r=n(23)(!1);r.push([t.i,".option[data-v-59bead52]{text-transform:capitalize}",""]),t.exports=r},354:function(t,e,n){"use strict";n(243)},355:function(t,e,n){var r=n(23)(!1);r.push([t.i,".wrap-admin-nav[data-v-516369cf]{padding:10px}.wrap-admin-nav a[data-v-516369cf]{display:block;color:#fff;text-decoration:none;text-transform:uppercase;letter-spacing:1px;font-weight:600;transition:all .3s ease-in-out;height:40px;line-height:40px;padding:0 10px;border-radius:8px;margin-bottom:2px;font-size:12px}.wrap-admin-nav a[data-v-516369cf]:hover{padding-left:15px;color:#1f91f2;background:#fff;letter-spacing:3px;font-size:14px}",""]),t.exports=r},356:function(t,e,n){"use strict";n(244)},357:function(t,e,n){var r=n(23)(!1);r.push([t.i,".select[data-v-1d7168f9]{text-transform:capitalize}",""]),t.exports=r},358:function(t,e,n){"use strict";n(245)},359:function(t,e,n){var r=n(23)(!1);r.push([t.i,".comp[data-v-f3dd9ce6]{display:inline-block;width:50px;text-align:center;transition:all .3s ease-in-out;cursor:pointer}.comp[data-v-f3dd9ce6]:hover{color:#f56c6c}",""]),t.exports=r},360:function(t,e,n){"use strict";n(246)},361:function(t,e,n){var r=n(23)(!1);r.push([t.i,".page-name[data-v-2a0cadf8]{margin-top:180px;text-align:center;margin-bottom:20px;color:#eee}.page-name .title[data-v-2a0cadf8]{text-transform:uppercase;font-weight:700;margin-bottom:10px}.wrap[data-v-2a0cadf8]{padding:20px;background:#fff;border-radius:10px;max-width:300px;margin:0 auto}",""]),t.exports=r},362:function(t,e,n){"use strict";n.r(e);var r=n(3),o=(n(22),n(36),"message/"),c={add:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l,param,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=t.commit,l=e.pageId,param=e.param,d={method:"post",url:"".concat(o,"add/").concat(l),data:param,message:{success:"Facebook page added."}},r.next=5,n.$sender(d).then((function(t){t.success&&c("ADD",t.content.data)}));case 5:case"end":return r.stop()}}),r)})))()},browse:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=t.commit,l={method:"get",url:"".concat(o,"browse/").concat(e)},r.next=4,n.$sender(l).then((function(t){t.success&&c("SET",{id:e,data:t.content.data})}));case 4:case"end":return r.stop()}}),r)})))()},edit:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,c={method:"put",url:"".concat(o).concat(param.id,"/edit"),data:param,message:{success:"Facebook page edited."}},n.next=4,e.$sender(c).then((function(t){t.success&&r("EDIT",t.content.data)}));case 4:case"end":return n.stop()}}),n)})))()}};e.default=c},363:function(t,e,n){"use strict";n.r(e),e.default={messages:function(t){return function(e){return t.messages[e]}},messageAll:function(t){return t.messages}}},364:function(t,e,n){"use strict";n.r(e);var r=n(5),o=n(38);n(44),n(19),n(14),n(18),n(10),n(25),n(15),n(26);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.default={ADD:function(t,e){var n=e.id,param=e.param;t.pages[n].push(param)},EDIT:function(t,e){t.messages=Object(o.a)(t.pages.map((function(t){return t.id!==e.id?t:l(l({},t),e)})))},SET:function(t,e){var n=e.id,data=e.data;t.messages[n]=data}}},365:function(t,e,n){"use strict";n.r(e),e.default=function(){return{messages:{0:[]}}}},366:function(t,e,n){"use strict";n.r(e),e.default={updateNotification:function(t,data){(0,t.commit)("UPDATE",data)}}},367:function(t,e,n){"use strict";n.r(e),e.default={notifications:function(t){return t.notifications}}},368:function(t,e,n){"use strict";n.r(e),e.default={UPDATE:function(t,e){t.notifications=e}}},369:function(t,e,n){"use strict";n.r(e),e.default=function(){return{notifications:""}}},370:function(t,e,n){"use strict";n.r(e);var r=n(3),o=(n(36),n(22),"page/"),c={add:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,c={method:"post",url:"".concat(o,"add"),data:param,message:{success:"Facebook page added."}},n.next=4,e.$sender(c).then((function(t){t.success&&r("ADD",t.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},browse:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,c={method:"get",url:"".concat(o,"browse").concat(null!==param?"?with_token=true":""),data:param},n.next=4,e.$sender(c).then((function(t){t.success&&r("SET",t.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},edit:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,c={method:"put",url:"".concat(o).concat(param.id,"/edit"),data:param,message:{success:"Facebook page edited."}},n.next=4,e.$sender(c).then((function(t){t.success&&r("EDIT",t.content.data)}));case 4:case"end":return n.stop()}}),n)})))()}};e.default=c},371:function(t,e,n){"use strict";n.r(e),e.default={pages:function(t){return t.pages}}},372:function(t,e,n){"use strict";n.r(e);var r=n(5),o=n(38);n(44),n(19),n(14),n(18),n(10),n(25),n(15),n(26);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.default={ADD:function(t,param){t.pages.push(param)},EDIT:function(t,e){t.pages=Object(o.a)(t.pages.map((function(t){return t.id!==e.id?t:l(l({},t),e)})))},SET:function(t,param){t.pages=param}}},373:function(t,e,n){"use strict";n.r(e),e.default=function(){return{pages:[]}}},374:function(t,e,n){"use strict";n.r(e),e.default={toggleVisualMode:function(t){var e=t.commit;e("TOGGLE_VISUAL_MODE")},setDeviceType:function(t){(0,t.commit)("SET_DEVICE_TYPE")},toggleNavCollapse:function(t){(0,t.commit)("TOGGLE_NAV_COLLAPSE")},setCurrentConversation:function(t,p){(0,t.commit)("SET_CURRENT_CONVERSATION",p)},unsetCurrentConversation:function(t){(0,t.commit)("UNSET_CURRENT_CONVERSATION")}}},375:function(t,e,n){"use strict";n.r(e),e.default={settings:function(t){return t.settings},theme:function(t){return t.settings.visualMode},device:function(t){return t.settings.device},isMobile:function(t){return t.settings.isMobile},navIsCollapsed:function(t){return t.settings.nav.collapse},currentConversation:function(t){return t.settings.nav.currentConversation}}},376:function(t,e,n){"use strict";n.r(e);n(28);e.default={TOGGLE_VISUAL_MODE:function(t){t.settings.visualMode="light"===t.settings.visualMode?"dark":"light"},SET_DEVICE_TYPE:function(t){t.settings.device=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"mobile":"computer",t.settings.isMobile="mobile"===t.settings.device},TOGGLE_NAV_COLLAPSE:function(t){t.settings.nav.collapse=!t.settings.nav.collapse},SET_CURRENT_CONVERSATION:function(t,p){t.settings.nav.currentConversation=p},UNSET_CURRENT_CONVERSATION:function(t){t.settings.nav.currentConversation=""}}},377:function(t,e,n){"use strict";n.r(e),e.default=function(){return{settings:{visualMode:"light",device:"computer",isMobile:!1,nav:{collapse:!1,currentConversation:""}}}}},378:function(t,e,n){"use strict";n.r(e);var r=n(3);n(22);e.default={get:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,o={method:"get",url:"client-statuses/all",data:{}},n.next=4,e.$sender(o).then((function(t){t.success&&r("SET",t.content.data)}));case 4:case"end":return n.stop()}}),n)})))()}}},379:function(t,e,n){"use strict";n.r(e),e.default={statuses:function(t){return t.statuses}}},380:function(t,e,n){"use strict";n.r(e),e.default={SET:function(t,param){t.statuses=param}}},381:function(t,e,n){"use strict";n.r(e),e.default=function(){return{statuses:[]}}},382:function(t,e,n){"use strict";n.r(e);var r=n(3),o=(n(36),n(22),"user/"),c={add:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,c=t.dispatch,l={method:"post",url:"".concat(o,"add"),data:param,message:{success:"User Added"}},n.next=4,e.$sender(l).then((function(t){t.success&&(r("ADD",t.content.data),c("users"))}));case 4:case"end":return n.stop()}}),n)})))()},users:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,c={method:"get",url:"".concat(o,"users"),data:param},n.next=4,e.$sender(c).then((function(t){t.success&&r("SET",t.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},search:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,c={method:"post",url:"".concat(o,"search"),data:param},n.next=4,e.$sender(c).then((function(t){t.success&&r("SET",t.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},edit:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,c={method:"put",url:"".concat(o).concat(param.id,"/edit"),data:param,message:{success:"Facebook page edited."}},n.next=4,e.$sender(c).then((function(t){t.success&&r("EDIT",t.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},roles:function(t,param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,n.next=3,e.$sender({method:"get",url:"".concat(o,"roles")}).then((function(t){t.success&&r("SET_ROLES",t.content.data)}));case 3:case"end":return n.stop()}}),n)})))()}};e.default=c},383:function(t,e,n){"use strict";n.r(e),e.default={users:function(t){return t.users},roles:function(t){return t.roles}}},384:function(t,e,n){"use strict";n.r(e);var r=n(5),o=n(38);n(44),n(19),n(14),n(18),n(10),n(25),n(15),n(26);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.default={ADD:function(t,param){t.users.push(param)},EDIT:function(t,e){t.pages=Object(o.a)(t.users.map((function(t){return t.id!==e.id?t:l(l({},t),e)})))},SET:function(t,param){t.users=param},SET_ROLES:function(t,param){t.roles=param}}},385:function(t,e,n){"use strict";n.r(e),e.default=function(){return{users:[],roles:[]}}},405:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=405},467:function(t,e,n){"use strict";n.r(e);n(19),n(14),n(25),n(15),n(26);var r=n(3),o=n(5),c=(n(22),n(18),n(10),n(139),n(13));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={data:function(){return{ap:[],visibility:{contactNav:!1},loading:{userPages:!1},data:{userPages:[]}}},fetch:function(){this.getPages(),this.api().getUserPages(this.$auth.user.id)},computed:d(d({},Object(c.c)({pages:"pages/pages"})),{},{activePages:function(){return this.pages.filter((function(p){return p.is_active}))}}),watch:{pages:{handler:function(t,e){this.ap=this.pages.filter((function(p){return p.is_active&&null!==p.access_token}))},deep:!0}},mounted:function(){"id"in this.$route.params&&this.handlePageClick(this.$route.params.id)},methods:d(d({},Object(c.b)({getPages:"pages/browse",setCurrentConversation:"settings/setCurrentConversation",toggleNavCollapse:"settings/toggleNavCollapse"})),{},{handlePageClick:function(p){this.visibility.contactNav=!0,this.$router.push("/pages/"+p)},handleNavClosed:function(){this.visibility.contactNav=!1},api:function(){var t=this;return{getUserPages:function(e){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading.userPages=!0,r={method:"get",url:"user/page/get/"+e},n.next=4,t.$sender(r).then((function(e){t.loading.userPages=!1,t.data.userPages=e.content.data}));case 4:case"end":return n.stop()}}),n)})))()}}},helper:function(){var t=this;return{getPageName:function(e){var n=t.pages.find((function(p){return p.id===e}));return"undefined"!==n?n:{name:"Page"}}}}})},v=(n(348),n(6)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"10px"}},[t.visibility.contactNav?t._e():n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.userPages,expression:"loading.userPages"}],staticStyle:{"min-height":"calc(100vh - 80px)"},attrs:{"element-loading-text":"Loading pages...","element-loading-background":"rgba(0, 0, 0, 0.5)"}},t._l(t.data.userPages,(function(p){return n("div",{key:p.id,class:"wrap-contacts "+(p.page_id===parseInt(t.$route.query.page)?"active":""),on:{click:function(e){return t.handlePageClick(p.page_id)}}},[t._v("\n      "+t._s(t.helper().getPageName(p.page_id)?t.helper().getPageName(p.page_id).name:"")+"\n    ")])})),0),t._v(" "),t.visibility.contactNav?n("NavContacts",{on:{navClosed:function(e){return t.handleNavClosed()}}}):t._e()],1)}),[],!1,null,"62c65e33",null);e.default=component.exports;installComponents(component,{NavContacts:n(468).default})},468:function(t,e,n){"use strict";n.r(e);n(19),n(14),n(25),n(26);var r=n(33),o=n(38),c=n(3),l=n(5),d=(n(22),n(139),n(10),n(15),n(44),n(36),n(39),n(86),n(18),n(28),n(74),n(13));function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={data:function(){return{loaded:{messages:!1},loadingOnFilter:!1,filterBy:{statuses:[],responders:[]},filtered:!1,eventData:{},next:null,magicLink:!1,loadMoreLoading:!1,conversations:[],conversation:{},clone:[],activeId:0,sender_id:0,unread_message:0,snippets:[],notification:{sound:"",audio:""},key:0}},computed:v(v({},Object(d.c)({pages:"pages/pages",theme:"settings/theme",navIsCollapsed:"settings/navIsCollapsed"})),{},{currentPage:function(){var t={},data=this.$route.params.id;return void 0!==data&&(t=v({},this.pages.find((function(p){return p.id===parseInt(data)})))),t}}),watch:{conversations:function(t,e){var n=this;0===this.clone.length?this.clone=t:(this.filtered?this.clone.forEach((function(e,r){t.forEach((function(t){e.mid&&e.mid===t.id&&(n.clone[r]=t),e.id&&e.id===t.id&&(n.clone[r]=t)}))})):t.map((function(e,r){return n.clone.forEach((function(t){void 0!==t.unread&&e.id===t.id&&(e.unread=t.unread),e.snippet!==t.snippet&&e.id===t.id&&n.$route.params.psid!==e.senders.data[0].id&&(e.unread="!")})),t})),this.filtered||(this.clone=t),this.key++),this.setClientData()},currentPage:function(t,q){t.id!==q.id&&this.getFbConversations()}},mounted:function(){var t=this;if("magic_link"in this.$route.query){var e={page_id:this.$route.query.page_id,mid:this.$route.query.mid};this.getConversation(e)}"psid"in this.$route.params&&this.reloadConversation(),this.$root.$on("new-message",(function(e){t.getNewMessage(e)})),this.$root.$on("set-status",(function(e){t.setStatus(e)})),this.$root.$on("set-responder",(function(e){t.setResponder(e)})),this.configSound()},methods:v(v({},Object(d.b)({setCurrentConversation:"settings/setCurrentConversation",unsetCurrentConversation:"settings/unsetCurrentConversation",toggleNavCollapse:"settings/toggleNavCollapse"})),{},{handleCancelFilter:function(){this.loadingOnFilter=!0,this.filterBy.statuses=[],this.filterBy.responders=[],this.filtered=!1,this.getFbConversations(),this.loadingOnFilter=!1},filter:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!(t.length>0&&void 0!==t[0])||t[0],e.loadingOnFilter=!0,0!==e.filterBy.statuses.length||0!==e.filterBy.responders.length){n.next=6;break}return e.handleCancelFilter(),e.loadingOnFilter=!1,n.abrupt("return");case 6:return e.filtered=!0,c={statuses:e.filterBy.statuses,responders:e.filterBy.responders},l="client/".concat(e.currentPage.page_id,"/filter"),n.next=11,e.$sender({method:"get",url:e.next&&r?e.next:l,data:c}).then((function(t){e.clone=e.next&&r?[].concat(Object(o.a)(e.clone),Object(o.a)(t.content.data.data)):t.content.data.data,e.next=t.content.data.next_page_url,e.loadingOnFilter=!1}));case 11:case"end":return n.stop()}}),n)})))()},setStatus:function(t){var e=this;this.clone=this.clone.map((function(n){return n.id===e.$route.params.mid&&(n.status=t),n})),console.log("status",this.clone)},setResponder:function(t){var e=this;this.clone=this.clone.map((function(n){return n.id===e.$route.params.mid&&(n.responder=t),n})),console.log("responder",this.clone)},setClientData:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]&&t[0],o=t.length>1&&void 0!==t[1]?t[1]:{},!r){n.next=13;break}if(o.message){n.next=5;break}return n.abrupt("return");case 5:return console.log("set client",e.clone),e.clone=e.clone.map((function(t){return t.id===e.$route.params.mid&&(t.snippet=o.message.text),t})),l=e.clone.find((function(t){return t.id===e.$route.params.mid})),d={participants:l.participants,snippet:l.snippet,updated_time:l.updated_time},n.next=11,e.$sender({method:"put",url:"client/".concat(l.id,"/update-additional-information"),data:{info:d}});case 11:return e.key++,n.abrupt("return");case 13:e.clone.forEach(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={participants:n.participants,snippet:n.snippet,updated_time:n.updated_time},t.next=3,e.$sender({method:"get",url:"client/".concat(n.id,"/getData"),data:{name:n.senders.data[0].name,info:r}}).then((function(t){n.responder=t.content.data.responder,n.status=t.content.data.status,n.unread=0===t.content.data.has_new_message?"":"!",e.key++}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 14:case"end":return n.stop()}}),n)})))()},getConversation:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$sender({method:"get",url:"".concat(t.page_id,"/").concat(t.mid,"/conversation"),data:{},headers:{contentType:"application/json"}});case 2:r=n.sent,e.conversation=r.content.data,e.magicLink=!0;case 5:case"end":return n.stop()}}),n)})))()},setClient:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t.currentPage.page_id){e.next=2;break}return e.abrupt("return");case 2:if(void 0===t.eventData.entry){e.next=11;break}if((n=t.eventData.entry[0].messaging[0].sender.id)!==t.currentPage.page_id.toString()){e.next=6;break}return e.abrupt("return");case 6:return{},r=v({},t.conversations.find((function(e){return e.participants.data.find((function(p){return p.id!==t.currentPage.page_id})).id===n}))),o={page_index_id:t.$route.params.id,page_id:t.currentPage.page_id,psid:n,mid:r.id},e.next=11,t.$sender({method:"post",url:"/client/set",data:o});case 11:case"end":return e.stop()}}),e)})))()},configSound:function(){this.audio=new Audio("/notification-sound.wav")},handleCloseNav:function(){this.unsetCurrentConversation(),this.conversations=[],this.$router.push("/pages/"),this.$emit("navClosed")},getNewMessage:function(t){var e=JSON.parse(t);if("object"===Object(r.a)(e)){this.eventData=e,this.sender_id=e.entry[0].messaging[0].sender.id;var n=e.entry[0].messaging[0].recipient.id;this.$route.params.psid!==this.sender_id&&this.$route.params.psid!==n?this.getFbConversations(!0):this.setClientData(!0,e.entry[0].messaging[0])}},getFbConversations:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.length>0&&void 0!==t[0]&&t[0]||(e.loaded.messages=!1),n.next=4,e.$sender({method:"get",url:"".concat(e.currentPage.page_id,"/conversations"),data:{},headers:{contentType:"application/json"}}).then((function(t){e.conversations=t.content.data.conversations,e.filtered||(e.next=t.content.data.next),e.setClient(),e.audio.play(),e.loaded.messages=!0})).catch((function(t){e.$cg({title:"Facebook get conversations error",type:"error",logs:t})}));case 4:case"end":return n.stop()}}),n)})))()},handleLoadMore:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.filtered){e.next=3;break}return t.filter(),e.abrupt("return");case 3:return t.loadMoreLoading=!0,e.next=6,t.$sender({method:"get",url:"".concat(t.currentPage.page_id,"/conversations?next=").concat(t.next),data:{},headers:{contentType:"application/json"}}).then((function(e){t.conversations=[].concat(Object(o.a)(t.conversations),Object(o.a)(e.content.data.conversations)),t.next=e.content.data.next,t.setClient(),t.loaded.messages=!0,t.loadMoreLoading=!1})).catch((function(e){t.loadMoreLoading=!1,t.$cg({title:"Facebook get conversations error",type:"error",logs:e})}));case 6:case"end":return e.stop()}}),e)})))()},reloadConversation:function(){var t=this,e=this.$route.params;this.$router.push("/pages/"+e.id+"/"+e.mid+"/"+e.psid),this.clone.map((function(n){return n.id===e.mid&&(n.unread=""),t.clone})),this.activeId=e.mid},readNewMessage:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.unread="",n.next=3,e.$sender({method:"put",url:"client/".concat(t.mid?t.mid:t.id,"/read-message")});case 3:case"end":return n.stop()}}),n)})))()},handleConversationClick:function(t){var e=this;this.readNewMessage(t),this.clone.map((function(n){return n.id===t.id&&(n.unread="",n.has_new_message=0),e.clone})),this.key++;var p=[];if(t.mid){this.activeId=t.mid;var n=JSON.parse(t.additional_information);p=n.participants.data,this.setCurrentConversation(n.participants.data[0].name)}else this.activeId=t.id,p=t.participants.data,this.setCurrentConversation(t.participants.data[0].name);var r=p.filter((function(p){return p.id!==e.currentPage.page_id+""}));if(this.$route.params.psid===r[0].id){var o=this.$createElement;this.$notify({message:o("i",{style:"color: teal"},"You click the same conversation.")})}else t.mid?this.$router.replace("/pages/"+this.currentPage.id+"/"+t.mid+"/"+r[0].id):this.$router.replace("/pages/"+this.currentPage.id+"/"+t.id+"/"+r[0].id)},convertRelativeTime:function(t){var e=(new Date).getTime(),n=new Date(t).getTime(),r=Math.floor((e-n)/1e3);return r<1?"0s":r<60?"".concat(r,"s"):r<3600?"".concat(Math.floor(r/60),"m"):r<86400?"".concat(Math.floor(r/3600),"h"):r<604800?"".concat(Math.floor(r/86400),"d"):void 0}})},m=h,x=(n(350),n(6)),component=Object(x.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.loaded.messages,expression:"!loaded.messages"}],staticStyle:{"margin-top":"-10px"},attrs:{"element-loading-background":"rgb(238, 238, 238)"}},[n("div",{staticClass:"filter",staticStyle:{height:"50px","padding-top":"12px"}},[n("div",{staticStyle:{float:"right","padding-right":"15px"}},[n("ElmDropdownFilterStatus",{attrs:{statuses:t.filterBy.statuses},on:{status:function(param){t.filterBy.statuses=param,t.filter(!1)}}})],1),t._v(" "),n("div",{staticStyle:{float:"right","padding-right":"15px"}},[n("ElmDropdownFilterResponder",{attrs:{responders:t.filterBy.responders},on:{responders:function(param){t.filterBy.responders=param,t.filter(!1)}}})],1)]),t._v(" "),t.magicLink?n("div",{key:t.key,staticClass:"wrap-conversations is-magiclink"},[n("div",{class:"wrap-fb-user "+(t.conversation.unread_count>0?"unread":"")+" active "+t.theme},[n("span",{staticClass:"name"},[t._v("\n        "+t._s(t.conversation.senders.data[0].name)+"\n      ")]),t._v(" "),n("div",{staticClass:"time"},[t._v("\n        "+t._s(t.convertRelativeTime(t.conversation.updated_time))+"\n      ")])])]):n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingOnFilter,expression:"loadingOnFilter"}],key:t.key,staticClass:"wrap-conversations not-magiclink"},[t._l(t.clone,(function(e){return n("div",{key:e.id,class:"wrap-fb-user "+(void 0!==e.unread&&""!==e.unread?"unread":"")+"\n      "+(void 0!==e.has_new_message&&0!==e.has_new_message?"unread":"")+"\n       "+(t.filtered?e.mid===t.activeId?"active":"":e.id===t.activeId?"active":"")+" "+t.theme,on:{click:function(n){return t.handleConversationClick(e)}}},[n("span",{staticClass:"name",staticStyle:{"font-weight":"bolder"}},[e.status&&1===e.status?n("i",{staticClass:"el-icon-user-solid",staticStyle:{color:"#67C23A"}}):t._e(),t._v(" "),e.status&&2===e.status?n("i",{staticClass:"el-icon-user-solid",staticStyle:{color:"#E6A23C"}}):t._e(),t._v(" "),e.status&&3===e.status?n("i",{staticClass:"el-icon-user-solid",staticStyle:{color:"#F56C6C"}}):t._e(),t._v(" "),e.status?t._e():n("i",{staticClass:"el-icon-user"}),t._v("\n        "+t._s(e.senders?e.senders.data[0].name:e.name?e.name:"")+"\n      ")]),t._v(" "),n("div",{staticClass:"time",staticStyle:{"text-align":"right"}},[t._v("\n        "+t._s(e.updated_time?t.convertRelativeTime(e.updated_time):e.additional_information?t.convertRelativeTime(JSON.parse(e.additional_information).updated_time):"")+"\n        "),n("p",[t._v("\n          "+t._s(e.responder?e.responder.name:"Please respond.")+"\n        ")])]),t._v(" "),void 0!==e.unread&&""!==e.unread||void 0!==e.has_new_message&&0!==e.has_new_message?n("span",{staticClass:"count"},[t._v("\n        "+t._s(e.unread?e.unread:e.has_new_message?0===e.has_new_message?"":"!":"")+"\n      ")]):t._e(),t._v(" "),n("div",{staticStyle:{clear:"both"}}),t._v(" "),n("div",{staticClass:"snippet"},[t._v("\n        "+t._s(e.snippet?e.snippet:e.additional_information?JSON.parse(e.additional_information).snippet:"")+"\n      ")])])})),t._v(" "),t.next?n("el-button",{class:"btn-back "+t.theme,staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{type:"default",size:"small",loading:t.loadMoreLoading},on:{click:t.handleLoadMore}},[t._v("\n      Load More\n    ")]):t._e()],2),t._v(" "),t.magicLink?n("el-button",{class:"btn-back "+t.theme,attrs:{type:"default",size:"small"},on:{click:function(e){t.magicLink=!1}}},[t._v("\n    Show other conversations\n  ")]):t._e(),t._v(" "),t.filtered?n("el-button",{class:"btn-back "+t.theme,attrs:{type:"default",size:"small"},on:{click:t.handleCancelFilter}},[t._v("\n    Cancel Filter\n  ")]):n("el-button",{class:"btn-back "+t.theme,attrs:{type:"default",size:"small"},on:{click:t.handleCloseNav}},[t._v("\n    Back\n  ")])],1)}),[],!1,null,"2430bc24",null);e.default=component.exports;installComponents(component,{ElmDropdownFilterStatus:n(469).default,ElmDropdownFilterResponder:n(470).default})},469:function(t,e,n){"use strict";n.r(e);n(19),n(14),n(18),n(10),n(25),n(15),n(26);var r=n(5),o=n(13);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var l={props:{statuses:{type:Array,default:function(){return[]}}},data:function(){return{key:0,selectedStatuses:this.statuses}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.c)({client_status:"statuses/statuses"})),watch:{statuses:function(t,e){this.selectedStatuses=t}},methods:{handleChange:function(){this.$emit("status",this.selectedStatuses)}}},d=l,f=(n(352),n(6)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.key},[n("el-select",{style:{width:"200px",padding:"0px"},attrs:{multiple:"","collapse-tags":"",clearable:"",placeholder:"Select status"},on:{change:t.handleChange},model:{value:t.selectedStatuses,callback:function(e){t.selectedStatuses=e},expression:"selectedStatuses"}},t._l(t.client_status,(function(t){return n("el-option",{key:t.id,staticClass:"option",attrs:{label:t.name,value:t.id}})})),1)],1)}),[],!1,null,"59bead52",null);e.default=component.exports},470:function(t,e,n){"use strict";n.r(e);n(19),n(14),n(18),n(10),n(25),n(15),n(26);var r=n(5),o=n(13);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var l={props:{responders:{type:Array,default:function(){return[]}}},data:function(){return{key:0,drawer:!1,direction:"ttb",selectedResponders:this.responders}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.c)({getResponders:"users/users",isMobile:"settings/isMobile"})),watch:{responders:function(t,e){this.selectedResponders=t}},methods:{handleFilter:function(){this.$emit("responders",this.selectedResponders),this.drawer=!1},handleCancel:function(){this.selectedResponders=[],this.drawer=!1},handleClose:function(t){this.$confirm("Are you sure you want to close this?").then((function(e){t()})).catch((function(t){}))}}},d=l,f=n(6),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.key},[n("el-tooltip",{attrs:{effect:"dark",content:"Select responder.",placement:"bottom"}},[n("el-button",{staticStyle:{"background-color":"white"},attrs:{icon:"el-icon-sort"},on:{click:function(e){t.drawer=!0}}})],1),t._v(" "),n("el-drawer",{staticClass:"drawer",attrs:{title:"Select Responders",visible:t.drawer,direction:t.direction,"before-close":t.handleClose,size:"100vh"},on:{"update:visible":function(e){t.drawer=e}}},[n("div",[n("el-row",[n("el-checkbox-group",{model:{value:t.selectedResponders,callback:function(e){t.selectedResponders=e},expression:"selectedResponders"}},t._l(t.getResponders,(function(e){return n("el-col",{key:e.id,attrs:{span:parseInt(t.isMobile?12:6)}},[n("div",{staticStyle:{padding:"20px 20px 20px 40px"}},[n("el-checkbox",{attrs:{border:"",label:e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1)])})),1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:24,offset:0}},[n("div",{staticStyle:{"text-align":"right",padding:"60px"}},[n("el-button",{attrs:{type:"default",size:"default"},on:{click:t.handleCancel}},[t._v("\n              Cancel\n            ")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"default"},on:{click:t.handleFilter}},[t._v("\n              Filter\n            ")])],1)])],1)],1)])],1)}),[],!1,null,null,null);e.default=component.exports},471:function(t,e,n){"use strict";n.r(e);var r={data:function(){return{navs:[{index:1,name:"dashboard",to:"/admin/dashboard"},{index:2,name:"users",to:"/admin/users"},{index:3,name:"pages",to:"/admin/pages"},{index:4,name:"settings",to:"/admin/settings"}]}}},o=(n(354),n(6)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap-admin-nav"},t._l(t.navs,(function(nav){return n("NuxtLink",{key:nav.index,attrs:{to:nav.to}},[t._v("\n    "+t._s(nav.name)+"\n  ")])})),1)}),[],!1,null,"516369cf",null);e.default=component.exports},472:function(t,e,n){"use strict";n.r(e);n(19),n(14),n(18),n(10),n(25),n(15),n(26);var r=n(3),o=n(5),c=(n(36),n(22),n(13));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d={data:function(){return{client:{},key:0}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)({client_status:"statuses/statuses"})),watch:{"$route.params":function(t,e){t&&this.$route.params.mid&&this.getClient()}},mounted:function(){this.getClient()},methods:{getClient:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$sender({method:"get",url:"client/".concat(t.$route.params.mid,"/getClient"),data:{}}).then((function(e){t.client=e.content.data,t.key++}));case 2:case"end":return e.stop()}}),e)})))()},handleClick:function(param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$sender({method:"put",url:"client/".concat(t.$route.params.mid,"/").concat(param,"/set-status"),data:{}}).then((function(e){t.client=e.content.data,console.log(t.client),t.$root.$emit("set-status",t.client.status),t.key++}));case 2:case"end":return e.stop()}}),e)})))()}}},f=d,v=(n(356),n(6)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dropdown",{key:t.key,on:{command:t.handleClick}},[n("el-button",{attrs:{type:"primary"}},[n("span",{staticClass:"select"},[t._v("\n        "+t._s(t.client.client_status?t.client.client_status.name:"Status unset")+"\n      ")]),t._v(" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.client_status,(function(e){return n("el-dropdown-item",{key:e.id,staticClass:"select",attrs:{command:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),1)],1)],1)}),[],!1,null,"1d7168f9",null);e.default=component.exports},473:function(t,e,n){"use strict";n.r(e);var r=n(3),o=(n(39),n(22),{data:function(){return{retrieved:!1,page:{},userPage:{},loading:!1}},watch:{"$route.query":function(t,e){void 0!==t.page&&this.getPageName()}},mounted:function(){var t=this;void 0!==this.$route.query.page&&this.getPageName(),this.$root.$on("PageJoined",(function(data){t.getPageName()})),this.$root.$on("PageChanged",(function(p){t.userPage=p}))},methods:{getPageName:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"get",url:"page/".concat(t.$route.query.page,"/view")},e.next=3,t.$sender(n).then((function(e){t.page=e.content.data,t.checkUserPageExists(t.page.id)}));case 3:case"end":return e.stop()}}),e)})))()},checkUserPageExists:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"get",url:"user/page/exists/".concat(t)},n.next=3,e.$sender(r).then((function(t){e.userPage=t.content.data,e.retrieved=!0}));case 3:case"end":return n.stop()}}),n)})))()},handlePageDropdownCommand:function(t){"leavePage"===t&&this.leavePage()},leavePage:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"put",url:"user/page/edit/".concat(t.$route.query.page),message:{success:"You have left ".concat(t.page.name)}},e.next=3,t.$sender(n).then((function(e){t.$router.push("/pages")}));case 3:case"end":return e.stop()}}),e)})))()}}}),c=n(6),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticStyle:{float:"left"}},[t._v("\n  "+t._s(t.page.name)+"\n")])}),[],!1,null,null,null);e.default=component.exports},474:function(t,e,n){"use strict";n.r(e);var r={methods:{handleClick:function(){var t=this;this.$auth.logout().then((function(e){t.$router.push("/")}))}}},o=(n(358),n(6)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comp",on:{click:t.handleClick}},[n("i",{staticClass:"el-icon-switch-button"})])}),[],!1,null,"f3dd9ce6",null);e.default=component.exports},56:function(t,e,n){"use strict";var r={layout:"app",props:["error"],mounted:function(){console.error(this.error)}},o=n(6),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",staticStyle:{"text-align":"center"}},[n("h1",{staticStyle:{"font-size":"48px",margin:"50px auto",color:"#F56C6C","margin-top":"100px"}},[n("i",{class:404===t.error.statusCode?"el-icon-document-delete":"el-icon-error"})]),t._v(" "),n("h1",{staticStyle:{"font-size":"46px",margin:"0 auto",color:"#ccc"}},[t._v("\n    Toink!\n    "),n("br"),t._v("\n    "+t._s(404===t.error.statusCode?"Page not found.":"An error occurred.")+"\n  ")]),t._v(" "),n("h1",{staticStyle:{"font-size":"60px",margin:"50px auto",color:"#ccc"}},[t._v("\n    "+t._s(t.error.statusCode)+"\n  ")]),t._v(" "),n("p",{staticStyle:{color:"#999"}},[t._v("\n    "+t._s(t.error.message)+"\n  ")]),t._v(" "),n("NuxtLink",{attrs:{to:"/"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-s-home"}},[t._v("\n      Back to Home\n    ")])],1)],1)}),[],!1,null,null,null);e.a=component.exports}},[[288,24,2,25]]]);