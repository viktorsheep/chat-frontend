(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{488:function(e,n,t){"use strict";t.r(n);var r=t(3),o=(t(18),{data:function(){return{visibility:{},loading:{comp:!1},data:{loading:"",firebaseToken:{},form:{firebase:{token:""}}}}},mounted:function(){this.getFirebaseToken()},methods:{getFirebaseToken:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.data.loading="loading",e.loading.comp=!0,t={method:"get",url:"setting/firebase_token/view"},n.next=5,e.$sender(t).then((function(n){console.log(n),e.data.firebaseToken=n.content.data,e.data.form.firebase.token=n.content.data.value,e.data.loading="loaded",e.loading.comp=!1}));case 5:case"end":return n.stop()}}),n)})))()},handle:function(){var e=this;return{btnGenerateClick:function(){return Object(r.a)(regeneratorRuntime.mark((function n(){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$fire.messaging.getToken();case 2:return t=n.sent,n.next=5,e.utils().contact({method:"put",url:"setting/firebase_token/edit",data:{value:t}});case 5:r=n.sent,console.log(r),e.data.form.firebase.token=r.content.data.value,e.firebase().startOnMessageListener();case 9:case"end":return n.stop()}}),n)})))()}}},handleBtnGenerateClick:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("hi generate clicked"),e.utils().turnLoading(!0),n.next=4,e.$fire.messaging.getToken();case 4:return t=n.sent,console.log(t),n.next=8,e.$sender({method:"put",url:"setting/firebase_token/edit",data:{value:t}}).then((function(n){console.log("completed"),e.data.form.firebase.token=t,e.firebase().startOnMessageListener(),e.utils().turnLoading(!1)}));case 8:case"end":return n.stop()}}),n)})))()},firebase:function(){var e=this;return{try:function(){console.log(e.loading.comp)},getToken:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$fire.messaging.getToken();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},startOnMessageListener:function(){e.$fire.messaging.onMessage((function(n){console.info("Message received : ",n),console.log(n.notification.body),e.notify({title:n.notification.title,message:n.notification.body})}))},startOnTokenChangedListener:function(){}}},utils:function(){var e=this;return{turnLoading:function(n){n?(e.data.loading="loading",e.loading.comp=!0):(e.data.loading="loaded",e.loading.comp=!1)},contact:function(n){var t=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.turnLoading(!0),r.next=3,e.$sender(n);case 3:return o=r.sent,t.turnLoading(!1),console.info(o),r.abrupt("return",o);case 7:case"end":return r.stop()}}),r)})))()}}},notify:function(p){this.$notify.info({title:p.title,body:p.body})}}}),c=t(11),component=Object(c.a)(o,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.comp,expression:"loading.comp"}]},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"Please input",readonly:!0},model:{value:e.data.form.firebase.token,callback:function(n){e.$set(e.data.form.firebase,"token",n)},expression:"data.form.firebase.token"}},[t("template",{slot:"prepend"},[e._v("\n      Firebase Token\n    ")]),e._v(" "),t("el-button",{staticStyle:{background:"#409EFF","border-radius":"0 4px 4px 0",color:"white"},attrs:{slot:"append",type:"success"},on:{click:function(n){e.handle().btnGenerateClick()}},slot:"append"},[e._v("\n      Generate\n    ")])],2),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.firebase().try()}}},[e._v("\n    fire\n  ")])],1)}),[],!1,null,null,null);n.default=component.exports}}]);