(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{482:function(e,t,r){var content=r(505);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("b68f5132",content,!0,{sourceMap:!1})},504:function(e,t,r){"use strict";r(482)},505:function(e,t,r){var n=r(23)(!1);n.push([e.i,".scroll-loading[data-v-08c42002]{width:calc(100% - 324px);text-align:center;background-color:#1f91f2;color:#fff;padding:5px;position:fixed;z-index:2}.wrap-chat[data-v-08c42002]{height:calc(100vh - 60px);margin:-20px;overflow:hidden;position:relative}.wrap-rejoin[data-v-08c42002]{background:#d8edff;height:50px;line-height:50px;margin-top:-91px;margin-bottom:40px;padding:0 20px;text-align:center;color:#777;border:1px solid #1f91f2;border-radius:8px}.wrap-messages[data-v-08c42002]{height:calc(100vh - 134px);min-width:300px;padding:10px 10px 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column-reverse}.wrap-messages .message[data-v-08c42002]{margin-bottom:10px}.wrap-messages .message .text[data-v-08c42002]{background:#eee;color:#999;position:relative;border-radius:14px 14px 14px 14px;padding:10px;transition:all .2s ease-in-out;margin-bottom:25px}.wrap-messages .message .text .btn-play[data-v-08c42002]{background:transparent;border:0 solid transparent;width:40px;height:40px;line-height:39px;border-radius:20px;color:#fff;font-size:20px;transition:all .2s ease-in-out;cursor:pointer}.wrap-messages .message .text .btn-play[data-v-08c42002]:hover{background:rgba(0,0,0,.1)}.wrap-messages .message .text .time[data-v-08c42002]{width:200px;height:25px;line-height:25px;position:absolute;bottom:-25px;font-size:12px;color:#ddd;display:block}.wrap-messages .message .text .time[data-v-08c42002]:hover{color:#999}.wrap-messages .message:hover .text[data-v-08c42002]{opacity:.8}.wrap-messages .message .time[data-v-08c42002]{transition:all .2s ease-in-out}.wrap-messages .message.sent.sending .text[data-v-08c42002]{opacity:.6}.wrap-messages .message.sent .text[data-v-08c42002]{float:right;background:#1f91f2;color:#fff;margin-bottom:40px}.wrap-messages .message.sent .text .time[data-v-08c42002]{right:0;text-align:right}.wrap-messages .message.sent:hover .text .time[data-v-08c42002]{color:#999}.wrap-messages .message.received .text[data-v-08c42002]{float:left;color:#777}.wrap-messages .message.received .text .time[data-v-08c42002]{left:0;text-align:left}.wrap-control[data-v-08c42002]{height:63px;line-height:63px;padding:0 10px;background:#eee;overflow:hidden;margin-bottom:-20px;min-width:300px}.wrap-control .input[data-v-08c42002]{display:inline-block;outline:none;padding:10px;border:0 solid transparent;border-radius:5px;background:rgba(0,0,0,.1);color:#454545;width:calc(100% - 66px)}.wrap-control.dark[data-v-08c42002]{background:#454545;box-shadow:0 -10px 20px rgba(0,0,0,.1)}.wrap-control.dark .input[data-v-08c42002]{background:hsla(0,0%,100%,.08);color:#ddd}.wrap-control.dark .input[data-v-08c42002]::-moz-placeholder{color:#999}.wrap-control.dark .input[data-v-08c42002]:-ms-input-placeholder{color:#999}.wrap-control.dark .input[data-v-08c42002]::placeholder{color:#999}.wrap-control.dark .input[data-v-08c42002]:focus{background:hsla(0,0%,100%,.1)}.wrap-recorder[data-v-08c42002]{text-align:center}.wrap-recorder .time[data-v-08c42002]{font-size:18px;color:#999;height:50px;line-height:50px}.wrap-audio-player[data-v-08c42002]{background:rgba(0,0,0,.1);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);position:absolute;top:-60px;height:60px;width:100%;z-index:999;box-shadow:0 5px 10px transparent;transition:all .2s ease-in-out}.wrap-audio-player audio[data-v-08c42002]{background-color:#00f;width:calc(100% - 60px);background:transparent}.wrap-audio-player .close[data-v-08c42002]{position:absolute;height:60px;width:60px;line-height:60px;text-align:center;color:#454545;top:0;right:0;cursor:pointer;opacity:.5}.wrap-audio-player .close[data-v-08c42002]:hover{opacity:1}.wrap-audio-player .timelabel[data-v-08c42002]{position:absolute;top:0;right:60px;width:100px;height:60px;line-height:60px;text-align:center}.wrap-audio-player .wrap-timeline[data-v-08c42002]{position:relative;width:calc(100% - 180px);height:60px}.wrap-audio-player .wrap-timeline .timeline[data-v-08c42002]{height:5px;width:100%;background:hsla(0,0%,100%,.5);border-radius:2.5px;position:absolute;top:27.5px;left:20px}.wrap-audio-player .wrap-timeline .timeline .current[data-v-08c42002]{position:absolute;height:5px;top:0;left:0;border-radius:2.5px;background:linear-gradient(135deg,#1f91f2,#00549c);transition:all .3s}.wrap-audio-player.show[data-v-08c42002]{top:0;box-shadow:0 5px 10px rgba(0,0,0,.3)}.wrap-audio-player.dark[data-v-08c42002]{background:rgba(0,0,0,.5)}.wrap-audio-player.dark .close[data-v-08c42002]{color:red}",""]),e.exports=n},525:function(e,t,r){"use strict";r.r(t);r(19),r(14),r(25),r(26);var n=r(37),o=r(3),c=r(5),l=(r(22),r(139),r(10),r(15),r(39),r(496),r(498),r(86),r(57),r(501),r(18),r(38),r(101),r(46),r(47),r(502),r(283),r(13));function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={layout:"app",data:function(){return{next:null,previousScrollTop:0,scrollTime:0,loadMore:!1,percentage:0,isPlaying:!1,eventSource:null,audioPlayer:{source:null,src:"",currentTime:0,timeLabel:"00:00:00",duration:0,icon:"el-icon-video-play"},message:"",selectedPage:null,msgControl:{empty:!0},disabled:{btnJoin:!1},loading:{wrap:!0,messages:!1},visibility:{controls:!1,recorder:!1,recPop:!1,audioPlayer:!1},sending:{text:"",status:!1},fbmessages:[],voiceMessages:{list:[],loading:!1},timer:{time:"01:00",status:!1,interval:"01:00"},recorder:{fn:"",is:{initiated:!1,recording:!1,waitingToRecord:!1,cancelled:!1},blob:"",visual:[],hasBlob:!1,chunks:[],player:{controls:!1,src:""}},rerenderx:0}},fetch:function(){},computed:h(h({},Object(l.c)({messages:"messages/messages",messageAll:"messages/messageAll",pages:"pages/pages",theme:"settings/theme",notifications:"notifications/notifications",navIsCollapsed:"settings/navIsCollapsed",isMobile:"settings/isMobile"})),{},{audioDuration:function(){return 0},currentPage:function(){var e={},data=this.$route.params.id;return void 0!==data&&(e=h({},this.pages.find((function(p){return p.id===parseInt(data)})))),e},renderMessage:function(){return this.fbmessages}}),watch:{pages:function(e){var t=this;if(void 0!==this.$route.params.id){var r;r=h({},this.pages.find((function(p){return p.id===parseInt(t.$route.params.id)}))),this.getMessages(r.page_id)}console.log("watch"),this.getFBMessage(!1,!1),console.log("watch pages")},message:function(e,t){this.msgControl.empty=""===e},recorder:{handler:function(e,t){""!==this.recorder.blob?this.recorder.hasBlob=!0:this.recorder.hasBlob=!1,e.is.initiated&&e.is.waitingToRecord&&this.startRecording()},deep:!0},fbmessages:{handler:function(e,t){var r=this;void 0!==e&&e.length>0&&(this.voiceMessages.list=[],e.forEach((function(e){""===e.message&&r.voiceMessages.list.push(e.id)})))},deep:!0},"voiceMessages.list":function(e,t){var r=this;e.length>0&&0===t.length&&!this.voiceMessages.loading&&(this.voiceMessages.loading||(this.voiceMessages.loading=!0),e.forEach((function(e){r.getAttachments(e)})))},"visibility.audioPlayer":function(e){!1===e&&(this.audioPlayer.duration=0)}},mounted:function(){var e=this;this.visibility.controls=!1,this.setPageOn(this.$route.params.id),this.getFBMessage(),console.log("mounted"),this.isMobile&&this.toggleNavCollapse(),this.$root.$on("new-message",(function(t){e.$route.params.mid&&e.getFBMessage(!0),console.log("event on")}))},methods:h(h({},Object(l.b)({getMessages:"messages/browse",updateNotification:"notifications/updateNotification",toggleNavCollapse:"settings/toggleNavCollapse"})),{},{handleScroll:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.$refs.messages,o=r.scrollHeight+r.scrollTop,t.previousScrollTop=r.scrollTop,!(o-t.scrollTime<=r.clientHeight+1)){e.next=10;break}if(t.loadMore=!0,t.scrollTime++,!t.next){e.next=9;break}return e.next=9,t.$sender({method:"get",url:"".concat(t.currentPage.page_id,"/").concat(t.$route.params.mid,"/messages?next=").concat(t.next),data:{},headers:{contentType:"application/json"}}).then((function(e){t.next=e.content.data.next,t.fbmessages=[].concat(Object(n.a)(t.fbmessages),Object(n.a)(e.content.data.messages)),t.visibility.controls=!0})).catch((function(e){t.$notify.error({title:"Sorry, something went wrong.",message:"There was an error while getting the messages. Please try again later."}),t.$cg({type:"error",title:"Facebook Get Message Error",logs:e})}));case 9:t.$nextTick((function(){t.loadMore=!1,t.scrollToTop()}));case 10:case"end":return e.stop()}}),e)})))()},scrollToTop:function(){this.$refs.messages.scrollTop=this.previousScrollTop-1},setAudio:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.isPlaying=!0,r.next=3,t.$sender({method:"post",url:"message/get-audio",data:{url:e.attachment.file_url}}).then((function(r){t.audioPlayer.src=e.attachment.file_url,t.audioPlayer.source=new Audio("data:audio/webm;base64,"+r.content.data.blob),t.audioPlayer.source.addEventListener("timeupdate",t.timeupdate,!1),t.audioPlayer.source.addEventListener("pause",(function(e){t.audioPlayer.icon="el-icon-video-play"})),t.audioPlayer.source.addEventListener("ended",(function(e){t.audioPlayer.icon="el-icon-video-play"})),t.playAudio(),t.visibility.audioPlayer=!0}));case 3:case"end":return r.stop()}}),r)})))()},stopAudio:function(){this.visibility.audioPlayer=!1,this.audioPlayer.source.pause()},timeupdate:function(){this.audioPlayer.source.duration!==1/0&&(this.audioPlayer.duration=parseFloat(100*this.audioPlayer.source.currentTime/this.audioPlayer.source.duration).toFixed(2)),this.audioPlayer.currentTime=this.audioPlayer.source.currentTime;var hr=Math.floor(this.audioPlayer.currentTime/3600),e=Math.floor((this.audioPlayer.currentTime-3600*hr)/60),t=Math.floor(this.audioPlayer.currentTime-3600*hr-60*e);this.audioPlayer.timeLabel="".concat(hr.toString().padStart(2,"0"),":").concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))},playAudio:function(){var e=this.audioPlayer;e.source.paused?(e.source.play(),e.duration=0,e.icon="el-icon-video-pause"):e.source.pause()},handlePause:function(){this.audioPlayer.source.pause(),this.isPlaying=!1},sendMessage:function(){var e=arguments,t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:"text",console.log("send message"),o=t.renderMessage.slice().find((function(e){return!1===t.isSent(e.tags)})),c="","audio"===n&&(t.visibility.recPop=!1),o&&(c=o.created_time),""!==t.message&&(n="text"),l=t.message+"",t.message="",t.sending={status:!0,text:"text"===n?l:"Voice Message."},d="text"===n?{recipient_id:t.$route.params.psid,message:{},access_token:t.currentPage.access_token,last_date:c}:new FormData,"text"!==n){r.next=17;break}return d.message="text"===n?l:"Voice Message.",r.next=15,t.$sender({method:"post",url:"me/send-messages",data:d}).then((function(e){t.resetRecorder(!0),t.getFBMessage(!0)})).catch((function(e){t.$notify.error({title:"Sorry, something went wrong.",message:"There was an error while sending the message. Please try again later."}),t.$cg({type:"error",title:"Facebook Send Message Error",logs:e})}));case 15:r.next=24;break;case 17:return d.append("recipient",JSON.stringify({id:t.$route.params.psid})),d.append("access_token",t.currentPage.access_token),d.append("last_date",c),d.append("message",JSON.stringify({attachment:{type:"audio",payload:{is_reusable:!0}}})),d.append("filedata",t.recorder.blob),r.next=24,t.$sender({method:"post",url:"me/send-voice",data:d,headers:{contentType:"formData"}}).then((function(e){t.resetRecorder(!0),t.getFBMessage(!0)}));case 24:return r.next=26,t.$sender({method:"put",url:"client/".concat(t.$route.params.psid,"/").concat(t.$auth.user.id,"/set-responder"),data:""}).then((function(e){t.$root.$emit("set-responder",e.content.data.responder)}));case 26:case"end":return r.stop()}}),r)})))()},setPageOn:function(e){this.checkIfPageExists(e)},checkIfPageExists:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading.wrap=!0,n={method:"get",url:"user/page/exists/".concat(e)},r.next=4,t.$sender(n).then((function(e){t.selectedPage=e.content.data,t.loading.wrap=!1}));case 4:case"end":return r.stop()}}),r)})))()},handleJoinClick:function(){this.initAddEdit("add")},handleRejoinClick:function(){this.initAddEdit("edit")},initAddEdit:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={method:"add"===e?"post":"put",url:"user/page/".concat(e,"/").concat(t.$route.params.id)},"edit"===e&&(n.message={success:"You rejoined chat to this page."}),r.next=4,t.$sender(n).then((function(e){t.selectedPage="Exits.",t.$root.$emit("PageJoined",e.content.data)}));case 4:return o=r.sent,r.abrupt("return",o);case 6:case"end":return r.stop()}}),r)})))()},getFBMessage:function(){var e=arguments,t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],o=!(e.length>1&&void 0!==e[1])||e[1],n||(t.visibility.controls=!0),void 0!==t.currentPage.page_id){r.next=5;break}return r.abrupt("return");case 5:return console.log("get fb messages"),r.next=8,t.$sender({method:"get",url:"".concat(t.currentPage.page_id,"/").concat(t.$route.params.mid,"/messages"),data:{},headers:{contentType:"application/json"}}).then((function(e){t.next=e.content.data.next,t.fbmessages=e.content.data.messages,t.visibility.controls=!0,t.sending={status:!1,text:""},t.$root.$emit("restart-stream",o)})).catch((function(e){t.$notify.error({title:"Sorry, something went wrong.",message:"There was an error while getting the messages. Please try again later."}),t.$cg({type:"error",title:"Facebook Get Message Error",logs:e})}));case 8:case"end":return r.stop()}}),r)})))()},getAttachments:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===(n=t.fbmessages.find((function(t){return t.id===e})))){r.next=5;break}return p={method:"get",url:"".concat(t.currentPage.page_id,"/").concat(e,"/attachments"),data:{},headers:{contentType:"application/json"}},r.next=5,t.$sender(p).then((function(r){var o=r.content.data.data;1===o.length?(n.attachment=o[0],t.fbmessages[t.fbmessages.findIndex((function(t){return t.id===e}))]=n,t.rerenderx+=1):(n.attachment=!1,t.fbmessages[t.fbmessages.findIndex((function(t){return t.id===e}))]=n,t.rerenderx+=1),t.voiceMessages.list=t.voiceMessages.list.filter((function(t){return t!==e})),0===t.voiceMessages.list.length&&(t.voiceMessages.loading=!1)}));case 5:t.$nextTick((function(){0!==t.scrollTime&&t.scrollToTop()}));case 6:case"end":return r.stop()}}),r)})))()},isSent:function(e){return void 0!==e.data.find((function(e){return"sent"===e.name}))},parseDate:function(e){var t=new Date(e);return{fullDate:this.$moment(e).format("D MMM YY hh:mm A"),date:this.$moment(t.getTime()).fromNow()}},handleStartTimer:function(){var e=this;this.timer.interval=setInterval((function(){0===e.timer.time?(e.stopRecording(),e.handleStopTimer(),e.resetTimer()):(e.timer.status=!0,"01:00"===e.timer.time&&(e.timer.time=60),e.timer.time--)}),1e3)},handleStopTimer:function(){this.timer.status=!1,clearInterval(this.timer.interval)},handleRecorderCancel:function(){this.stopRecording(!0)},resetTimer:function(){this.timer.time="01:00",this.timer.status=!1},initRecorder:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){var r=["audio/wav","audio/mpeg","audio/webm","audio/ogg"].filter(MediaRecorder.isTypeSupported)[0];e.recorder.fn=new MediaRecorder(t,{mimeType:r}),e.recorder.is.initiated=!0,e.recorder.fn.ondataavailable=function(t){if(e.recorder.chunks.push(t.data),"inactive"===e.recorder.fn.state){var r=new Blob(e.recorder.chunks,{type:e.recorder.chunks[0].type});e.recorder.player.src=URL.createObjectURL(r),e.recorder.player.controls=!0,e.recorder.is.cancelled||(e.recorder.blob=r),e.recorder.is.cancelled=!1}},e.recorder.fn.onstop=function(r){t.getTracks().forEach((function(track){track.stop()})),e.resetRecorder()}}))},initRecording:function(){this.recorder.is.initiated?this.startRecording():(this.recorder.is.waitingToRecord=!0,this.initRecorder())},startRecording:function(){this.recorder.chunks=[],this.recorder.fn.start(),this.handleStartTimer(),this.recorder.is.waitingToRecord=!1},stopRecording:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.recorder.is.cancelled=!0),this.recorder.fn.stop(),this.handleStopTimer()},resetRecorder:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.resetTimer(),this.recorder.is.initiated=!1,e&&(this.recorder.blob="")},handlePopOverAfterLeave:function(){this.resetRecorder(!0)},uploadBlob:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("file",e.recorder.blob),n={method:"post",url:"file/upload",headers:{contentType:"formData"},data:r},t.next=5,e.$sender(n);case 5:case"end":return t.stop()}}),t)})))()},deleteBlob:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$sender({method:"delete",url:"file/delete"});case 2:case"end":return t.stop()}}),t)})))()},handleMessageWrapClick:function(){this.isMobile&&!this.navIsCollapsed&&this.toggleNavCollapse()}})},f=m,v=(r(504),r(6)),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.wrap,expression:"loading.wrap"}],staticStyle:{"min-width":"300px"},attrs:{"element-loading-text":"Retrieving Information...","element-loading-background":"light"===e.theme?"rgba(255,255,255,0.5)":"rgba(0, 0, 0, 0.5)"},on:{click:e.handleMessageWrapClick}},[null===e.selectedPage?r("el-empty",{staticStyle:{"min-width":"300px"},attrs:{description:"Select one of the page at the right side to get started."}}):"Does not exists."===e.selectedPage?r("el-empty",{staticStyle:{"min-width":"300px"},attrs:{description:"You are not joined to this page. Join now to send prayers."}},[r("el-button",{attrs:{type:"primary",size:"mini",disabled:e.disabled.btnJoin},on:{click:e.handleJoinClick}},[e._v("\n      Join\n    ")])],1):r("div",{staticClass:"wrap-chat"},[!0===e.loadMore?r("div",{staticClass:"scroll-loading"},[e._v("\n      Loading...\n    ")]):e._e(),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.visibility.controls&&void 0!==e.$route.params.psid,expression:"!visibility.controls && $route.params.psid !== undefined"}],key:e.rerenderx,ref:"messages",staticClass:"wrap-messages",attrs:{id:"messages","element-loading-text":"Getting Messages","element-loading-background":"light"===e.theme?"rgba(255,255,255,0.5)":"rgba(0, 0, 0, 0.5)"},on:{scroll:e.handleScroll}},[e.sending.status?r("div",{staticClass:"message sent sending"},[r("div",{staticClass:"text"},[r("i",{staticClass:"el-icon-loading"}),e._v("\n          "+e._s(e.sending.text)+"\n\n          "),r("div",{staticClass:"time"})])]):e._e(),e._v(" "),e._l(e.renderMessage,(function(t){return r("div",{key:t.id,class:"message "+(!0===e.isSent(t.tags)?"sent":"received")},[r("div",{staticClass:"text"},[""===t.message?r("div",[t.hasOwnProperty("attachment")&&!1===t.attachment?r("div",[e._v("\n              Attachment cannot be shown\n            ")]):t.hasOwnProperty("attachment")&&!1!==t.attachment&&t.attachment.mime_type.startsWith("image/")?r("div",{staticStyle:{"min-width":"54px","text-align":"center"}},[r("img",{staticStyle:{width:"200px",height:"auto"},attrs:{src:t.attachment.image_data.url,alt:"Attachment Image"}})]):t.hasOwnProperty("attachment")&&!1!==t.attachment?r("div",{staticStyle:{"min-width":"54px","text-align":"center"}},[t.attachment.mime_type.startsWith("audio/")?r("div",{staticStyle:{height:"54px","line-height":"54px"}},[!1===e.isPlaying?r("button",{staticClass:"el-icon-video-play btn-play",on:{click:function(r){return e.setAudio(t)}}}):r("button",{staticClass:"btn-play",on:{click:e.handlePause}},[r("i",{class:e.audioPlayer.src===t.attachment.file_url?e.audioPlayer.icon:"el-icon-video-play"})])]):e._e()]):r("div",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],staticStyle:{width:"54px",height:"54px",color:"white"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0)"}})]):r("div",[e._v("\n            "+e._s(t.message)+"\n          ")]),e._v(" "),r("div",{staticClass:"time"},[r("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.parseDate(t.created_time).fullDate,placement:!0===e.isSent(t.tags)?"left":"right"}},[r("span",[e._v("\n                "+e._s(e.parseDate(t.created_time).date)+"\n              ")])])],1)]),e._v(" "),r("div",{staticStyle:{clear:"both"}})])}))],2),e._v(" "),"Left."===e.selectedPage?r("div",{staticClass:"wrap-rejoin"},[e._v("\n      You left this page chat.\n      "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleRejoinClick}},[e._v("\n        Rejoin Now\n      ")])],1):e._e(),e._v(" "),e.visibility.controls?r("div",{class:"wrap-control "+e.theme},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"input",attrs:{type:"text",placeholder:"Left."===e.selectedPage?"You cannot send messages because you have left the page. Join again to be able to send messages again.":"Press enter to send...",disabled:"Left."===e.selectedPage||e.visibility.recPop},domProps:{value:e.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),r("el-input",{staticClass:"blue",staticStyle:{display:"none",width:"calc(100% - 50px)"},attrs:{placeholder:"Left."===e.selectedPage?"You cannot send messages because you have left the page. Join again to be able to send messages again.":"Press enter to send ...",size:"small",clearable:"",disabled:"Left."===e.selectedPage||e.visibility.recPop},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),e.msgControl.empty?r("el-popover",{attrs:{placement:"top",width:"400",trigger:"manual",value:e.visibility.recorder},on:{"after-leave":e.handlePopOverAfterLeave},model:{value:e.visibility.recPop,callback:function(t){e.$set(e.visibility,"recPop",t)},expression:"visibility.recPop"}},[r("div",{staticClass:"wrap-recorder"},[e.recorder.hasBlob?e._e():r("div",[r("div",{staticClass:"time"},[e._v("\n              "+e._s(e.timer.time)+"\n            ")]),e._v(" "),r("el-button",{attrs:{icon:e.timer.status?"el-icon-check":"el-icon-microphone",type:e.timer.status?"danger":"primary",circle:""},on:{click:function(t){e.timer.status?e.stopRecording():e.initRecording()}}}),e._v(" "),e.timer.status?r("el-button",{attrs:{icon:"el-icon-close",size:"small",circle:""},on:{click:function(t){return e.handleRecorderCancel()}}}):e._e()],1),e._v(" "),e.recorder.hasBlob?r("div",[r("audio",{attrs:{id:"recordedAudio",controls:e.recorder.player.controls,src:e.recorder.player.src,autoplay:"false"}}),e._v(" "),r("div",{staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{icon:"el-icon-s-promotion",type:"primary",circle:""},on:{click:function(t){return e.sendMessage("audio")}}}),e._v(" "),r("el-button",{attrs:{icon:"el-icon-refresh",type:"default",size:"small",circle:""},on:{click:function(t){return e.resetRecorder(!0)}}})],1)]):e._e()]),e._v(" "),r("el-button",{style:"width: 40px; color: #"+(e.visibility.recPop?"F56C6C":"409EFF")+";",attrs:{slot:"reference",type:"text",disabled:"Left."===e.selectedPage},on:{click:function(t){e.visibility.recPop=!e.visibility.recPop}},slot:"reference"},[r("i",{class:e.visibility.recPop?"el-icon-close":"el-icon-microphone"})])],1):r("el-button",{staticStyle:{width:"40px"},attrs:{type:"text"},on:{click:function(t){return e.sendMessage("text")}}},[r("i",{staticClass:"el-icon-s-promotion"})])],1):e._e()])],1)}),[],!1,null,"08c42002",null);t.default=component.exports}}]);