(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{193:function(e,t,n){"use strict";var r=n(1),o=n(98),c=n.n(o),l=n(275),d=n.n(l);r.default.use(c.a,{locale:d.a})},196:function(e,t,n){"use strict";(function(e){var r=n(5),o=n(3),c=(n(22),n(98));t.a=function(t,n){var l=t.app,d=l.$auth.strategy.token.get(),f=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){var o,f,content,data,v,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=!1,content={},data=void 0!==n.data?n.data:{},v={Authorization:d},void 0!==n.headers&&(h=n.headers.contentType,v["Content-Type"]="formData"===h?"multipart/form-data":"application/x-www-form-urlencoded"),void 0!==n.baseURL?l.$axios.setBaseURL(n.baseURL):l.$axios.setBaseURL(l.$config.baseURL),t.next=8,l.$axios((o={method:n.method,url:n.url},Object(r.a)(o,"get"===n.method?"params":"data",data),Object(r.a)(o,"headers",v),o)).then((function(e){200!==e.status&&201!==e.status||("message"in n&&"success"in n.message&&Object(c.Notification)({type:"success",message:n.message.success}),content.data=e.data),f=!0})).catch((function(e){Object(c.Notification)({type:"error",dangerouslyUseHTMLString:!0,message:"Sorry, Something went wrong. <br /> Error : "+e.response.status})})).then((function(){void 0!==n.baseURL&&l.$axios.setBaseURL("production"===e.env.APP_ENV?e.env.PUBLIC_URL+e.env.BASE_URL:e.env.LOCAL_URL+e.env.BASE_URL)}));case 8:return t.abrupt("return",{success:f,content:content});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();n("sender",f)}}).call(this,n(164))},197:function(e,t,n){"use strict";n(10),n(15);t.a=function(e,t){e.app;t("cg",(function(param){console.group(param.title),"error"!==param.type?param.logs.forEach((function(e){console.log(e)})):console.error(param.logs),console.groupEnd()}))}},236:function(e,t,n){var content=n(339);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("b7e08482",content,!0,{sourceMap:!1})},237:function(e,t,n){var content=n(341);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("178f2201",content,!0,{sourceMap:!1})},238:function(e,t,n){var content=n(343);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("67a12fb7",content,!0,{sourceMap:!1})},239:function(e,t,n){var content=n(345);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("53305c46",content,!0,{sourceMap:!1})},240:function(e,t,n){var content=n(347);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("524d954e",content,!0,{sourceMap:!1})},241:function(e,t,n){var content=n(349);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("c105f672",content,!0,{sourceMap:!1})},242:function(e,t,n){var content=n(351);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("568c20eb",content,!0,{sourceMap:!1})},243:function(e,t,n){var content=n(353);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("379c22ad",content,!0,{sourceMap:!1})},244:function(e,t,n){var content=n(355);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("4cbc0134",content,!0,{sourceMap:!1})},271:function(e,t,n){"use strict";n.r(t);var r={},o=(n(344),n(6)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[e._v("\n  Ekballo\n  "),n("span",{staticClass:"second"},[e._v("\n    Chat\n  ")])])}],!1,null,"7bf7bdd6",null);t.default=component.exports},277:function(e,t,n){"use strict";n(19),n(14),n(18),n(23),n(15),n(24);var r=n(5),o=(n(139),n(10),n(39),n(13));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={middleware:"auth",data:function(){return{eventSource:null,visibility:{profile:!1},disabled:{btn:{logout:!1}}}},computed:l({},Object(o.c)({settings:"settings/settings",theme:"settings/theme",pages:"pages/pages",notifications:"notifications/notifications",isMobile:"settings/isMobile",navIsCollapsed:"settings/navIsCollapsed",currentConversation:"settings/currentConversation"})),watch:{"$route.params":{handler:function(e,t){if(null!==this.eventSource&&(this.eventSource.close(),console.log("Event closed")),"id"in e&&0!==this.pages.length){var n=l({},this.pages.find((function(p){return p.id===parseInt(e.id)})));this.setupStream(n.page_id),console.log("Event started",n.page_id)}},deep:!0}},mounted:function(){var e=this;this.setDeviceType(),this.getClientStatuses(),this.getUsers(),this.$root.$on("restart-stream",(function(t){if(null!==e.eventSource&&e.eventSource.close(),"psid"in e.$route.params){var n=l({},e.pages.find((function(p){return p.id===parseInt(e.$route.params.id)})));e.setupStream(n.page_id,t)}}))},methods:l(l({},Object(o.b)({getUsers:"users/users",getClientStatuses:"statuses/get",updateNotification:"notifications/updateNotification",setDeviceType:"settings/setDeviceType",toggleNavCollapse:"settings/toggleNavCollapse"})),{},{handleDropdownCommand:function(e){var t=this;"logout"===e&&this.$auth.logout().then((function(e){t.$router.push("/")}))},setupStream:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!==EventSource?(this.eventSource=new EventSource("".concat(this.$config.baseURL,"noti/").concat(e)),this.eventSource.addEventListener("message",(function(e){""!==e.data&&e.data!==t.notifications&&"undefined"!==e.data&&!1!==n&&(t.updateNotification(e.data),t.$root.$emit("new-message",e.data),console.group("Event"),console.log("Event",e),console.log("Event data",JSON.parse(e.data)),console.log("Event notifications",t.notifications),console.groupEnd())}),!1),this.eventSource.addEventListener("error",(function(e){e.readyState===EventSource.CLOSED&&(console.log("Event was closed"),console.log(EventSource))}),!1)):this.$notify({title:"SSE Error",message:"Sorry, your browser dose not support server-sent events..."})},handleLogout:function(){var e=this;this.disabled.btn.logout=!0,this.$auth.logout().then((function(t){e.disabled.btn.logout=!1,e.$router.push("/")}))}})},f=d,v=(n(338),n(340),n(342),n(6)),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.isMobile?"wrap-mobile-layout":""},[n("el-container",{staticStyle:{height:"100vh"}},[n("el-aside",{class:"aside "+(e.navIsCollapsed?"collapsed":""),staticStyle:{"background-color":"#1f91f2"},attrs:{width:(e.navIsCollapsed?"0":"300")+"px"}},[n("div",{staticStyle:{background:"#0003",height:"50px","line-height":"50px","padding-top":"10px",position:"relative"}},[e.isMobile?n("div",[n("span",{class:"txt-section "+(e.navIsCollapsed?"hide":"")},[e._v("\n            "+e._s(void 0!==e.$route.params.id?"Conversations":"Pages")+"\n          ")]),e._v(" "),n("button",{staticClass:"btn-profile",attrs:{type:"button"},on:{click:function(t){e.visibility.profile=!e.visibility.profile}}},[n("i",{class:e.visibility.profile?"el-icon-close":"el-icon-user-solid"})]),e._v(" "),n("div",{class:"wrap-profile "+(e.visibility.profile?"shown":"")},[n("div",{staticClass:"item"},[n("div",{staticClass:"txt-username"},[e._v("\n                "+e._s(e.$auth.user.name)+"\n              ")])]),e._v(" "),n("div",{staticClass:"item"},[n("button",{staticClass:"btn-logout",attrs:{type:"button",disabled:e.disabled.btn.logout},on:{click:e.handleLogout}},[n("i",{class:" "+(e.disabled.btn.logout?"el-icon-loading":"el-icon-switch-button")}),e._v("   "+e._s(e.disabled.btn.logout?"Logging out.":"Logout")+"\n              ")])])])]):n("Logo")],1),e._v(" "),3===e.$auth.user.user_role_id?n("NavUser"):n("NavAdmin")],1),e._v(" "),n("el-container",[n("el-header",{class:"header "+("light"===e.settings.visualMode?"":"dark")},[e.isMobile?n("div",{staticClass:"mobile-header"},[n("div",{class:"txt-conversation "+(e.navIsCollapsed?"":"hide")},[e._v("\n            "+e._s(e.currentConversation)+"\n          ")]),e._v(" "),n("button",{staticClass:"btn-mobile",attrs:{type:"button"},on:{click:function(t){return e.toggleNavCollapse()}}},[n("i",{class:e.navIsCollapsed?"el-icon-s-unfold":"el-icon-arrow-left"})]),e._v(" "),e.$route.params.psid?n("span",{staticStyle:{float:"right"}},[n("ElmDropdownStatus")],1):e._e()]):n("div",[1===e.$auth.user.user_role_id?n("span",{staticStyle:{color:"#e6a23c",float:"left"}},[e._v("Super Admin  ")]):e._e(),e._v(" "),n("ElmDropdownTopBarPage"),e._v(" "),e.$route.params.psid?n("span",{staticStyle:{float:"left"}},[n("ElmDropdownStatus")],1):e._e(),e._v("\n\n          "+e._s(e.$auth.user.name)+"\n          "),e._v(" "),n("ElmDropdownLogout")],1)]),e._v(" "),n("el-main",{class:"main "+e.theme},[n("Nuxt")],1)],1)],1)],1)}),[],!1,null,"03a269ab",null);t.a=component.exports;installComponents(component,{Logo:n(271).default,NavUser:n(461).default,NavAdmin:n(465).default,ElmDropdownStatus:n(466).default,ElmDropdownTopBarPage:n(467).default,ElmDropdownLogout:n(468).default})},278:function(e,t,n){"use strict";n(26),n(165);var r={auth:"guest",computed:{pageName:function(){var e=this.$route.path.split("/");return e[2]}}},o=(n(354),n(6)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%",height:"100vh",background:"#1f91f2"}},[n("el-row",{attrs:{gutter:0}},[n("el-col",{attrs:{span:24,offset:0}},[n("div",{staticClass:"page-name"},[n("div",{staticClass:"title"},[e._v("\n          Welcome "),"login"===e.pageName?n("span",[e._v("back")]):e._e(),e._v(" to Ekballo Chat!\n        ")]),e._v(" "),n("div",{staticClass:"sub-title"},[e._v("\n          Please continue to "+e._s(e.pageName)+"\n        ")])])])],1),e._v(" "),n("el-row",{attrs:{gutter:0}},[n("el-col",{attrs:{span:20,offset:2}},[n("div",{staticClass:"wrap"},[n("Nuxt")],1)])],1)],1)}),[],!1,null,"2a0cadf8",null);t.a=component.exports},279:function(e,t,n){"use strict";var r={},o=n(6),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"padding-top":"50px"}},[n("Logo"),e._v(" "),n("div",{staticStyle:{"text-align":"center","margin-top":"50px"}},[n("Nuxt")],1)],1)}),[],!1,null,null,null);t.a=component.exports;installComponents(component,{Logo:n(271).default})},286:function(e,t,n){n(287),e.exports=n(288)},312:function(e,t,n){"use strict";n.r(t),t.default=function(e){e.$auth.loggedIn&&(e.$auth.loggedIn&&1===e.$auth.user.user_role_id?e.redirect("/admin/dashboard"):e.redirect("/pages"))}},313:function(e,t,n){"use strict";n.r(t),t.default=function(e){e.$auth.loggedIn&&(e.$auth.loggedIn&&1===e.$auth.user.user_role_id?e.redirect("/admin/dashboard"):e.redirect("/pages"))}},331:function(e,t,n){var content=n(332);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(30).default)("c3ae2b30",content,!0,{sourceMap:!1})},332:function(e,t,n){var r=n(29),o=n(235),c=n(333),l=n(334),d=n(335),f=n(336),v=n(337),h=r(!1),m=o(c),w=o(l),x=o(d),y=o(f),_=o(v);h.push([e.i,'@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+m+') format("woff2");unicode-range:U+0460-052f,U+1c80-1c88,U+20b4,U+2de0-2dff,U+a640-a69f,U+fe2e-fe2f}@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+w+') format("woff2");unicode-range:U+0400-045f,U+0490-0491,U+04b0-04b1,U+2116}@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+x+') format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01a0-01a1,U+01af-01b0,U+1ea0-1ef9,U+20ab}@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+y+') format("woff2");unicode-range:U+0100-024f,U+0259,U+1e??,U+2020,U+20a0-20ab,U+20ad-20cf,U+2113,U+2c60-2c7f,U+a720-a7ff}@font-face{font-family:"Nunito";font-style:normal;font-weight:400;src:url('+_+') format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}',""]),e.exports=h},333:function(e,t,n){e.exports=n.p+"fonts/Nunito-400-cyrillic-ext1.ea59f4e.woff2"},334:function(e,t,n){e.exports=n.p+"fonts/Nunito-400-cyrillic2.905568d.woff2"},335:function(e,t,n){e.exports=n.p+"fonts/Nunito-400-vietnamese3.6fcc161.woff2"},336:function(e,t,n){e.exports=n.p+"fonts/Nunito-400-latin-ext4.6463a96.woff2"},337:function(e,t,n){e.exports=n.p+"fonts/Nunito-400-latin5.6c056c5.woff2"},338:function(e,t,n){"use strict";n(236)},339:function(e,t,n){var r=n(29)(!1);r.push([e.i,"body{font-family:Nunito,sans-serif;color:#454545;font-size:16px;margin:0}",""]),e.exports=r},340:function(e,t,n){"use strict";n(237)},341:function(e,t,n){var r=n(29)(!1);r.push([e.i,"",""]),e.exports=r},342:function(e,t,n){"use strict";n(238)},343:function(e,t,n){var r=n(29)(!1);r.push([e.i,".aside[data-v-03a269ab]{background:#1f91f2;background:linear-gradient(135deg,#1f91f2,#00549c);width:60px;transition:all .4s ease-in-out}.aside.collapsed[data-v-03a269ab]{width:250px}.header[data-v-03a269ab]{position:relative;line-height:60px;text-align:right;background:#eee;transition:all .3s ease-in-out;color:#777}.header.dark[data-v-03a269ab]{background:#454545;background:linear-gradient(135deg,#454545,#333);color:#ccc}.header .btn-mobile[data-v-03a269ab]{width:60px;height:60px;line-height:60px;color:#1f91f2;padding:0 10px;font-size:22px;text-align:center;background:none;border-width:0;position:absolute;top:0;left:0}.header .btn-mobile[data-v-03a269ab]:active{background:hsla(0,0%,100%,.31373)}.header .txt-conversation[data-v-03a269ab]{position:absolute;left:60px;top:0;text-align:left;visibility:visible;opacity:1}.header .txt-conversation.hide[data-v-03a269ab]{visibility:hidden;opacity:0;width:0}.main[data-v-03a269ab]{background:#fff;transition:all .3s ease-in-out;max-height:calc(100vh - 60px);overflow-y:auto}.main.dark[data-v-03a269ab]{background:linear-gradient(135deg,#777,#3b3b3b);box-shadow:inset 10px 0 20px rgba(0,0,0,.15)}.txt-section[data-v-03a269ab]{display:inline-block;position:absolute;top:0;left:0;height:60px;line-height:60px;padding-left:10px;color:#fff;visibility:visible;opacity:1;transition:all .5s ease-in-out;font-weight:900}.txt-section.hide[data-v-03a269ab]{visibility:hidden;opacity:0}.mobile-header[data-v-03a269ab]{width:100%;min-width:300px;overflow:hidden}.wrap-mobile-layout[data-v-03a269ab]{width:100vw;height:100vh;overflow:hidden}.btn-profile[data-v-03a269ab]{position:absolute;top:0;right:0;height:60px;width:60px;border-width:0;background:none;font-size:18px;color:#fff}.btn-profile[data-v-03a269ab]:active{background:hsla(0,0%,100%,.31373)}.wrap-profile[data-v-03a269ab]{background:rgba(0,0,0,.25);position:absolute;top:100%;left:0;width:100%;visibility:hidden;opacity:0;transition:all .4s ease-in-out;height:calc(100vh - 60px);z-index:99999999999999}.wrap-profile.shown[data-v-03a269ab]{visibility:visible;opacity:1}.wrap-profile .item[data-v-03a269ab]{padding:10px;background:#1f91f2;color:#fff}.wrap-profile .item .txt-username[data-v-03a269ab]{text-align:center;border-bottom:1px solid hsla(0,0%,100%,.12549)}.btn-logout[data-v-03a269ab]{border:0;background:none;color:#fff;width:100%;text-align:left;height:50px;line-height:50px}.btn-logout[data-v-03a269ab]:active,.btn-logout[data-v-03a269ab]:disabled{background:hsla(0,0%,100%,.31373)}",""]),e.exports=r},344:function(e,t,n){"use strict";n(239)},345:function(e,t,n){var r=n(29)(!1);r.push([e.i,".logo[data-v-7bf7bdd6]{color:#fff;color:#1f91f2;height:20px;line-height:20px;padding:10px;text-align:center;font-weight:900;font-size:20px;text-transform:uppercase;border-radius:8px}.logo .second[data-v-7bf7bdd6]{display:inline-block;padding:5px 10px;background:#1f91f2;border-radius:4px;color:#fff;margin-top:-5px}",""]),e.exports=r},346:function(e,t,n){"use strict";n(240)},347:function(e,t,n){var r=n(29)(!1);r.push([e.i,".wrap-contacts[data-v-62c65e33]{height:40px;line-height:40px;color:#fff;width:calc(100% - 40px);min-width:260px;margin-left:10px;padding:0 10px;border-radius:8px;margin-bottom:5px;margin-top:10px;cursor:pointer;font-weight:bolder;transition:all .2s ease-in-out;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.wrap-contacts[data-v-62c65e33]:hover{background:rgba(0,0,0,.1);padding-left:20px;padding-right:0}.wrap-contacts[data-v-62c65e33]:first-of-type{margin-top:20px}.wrap-contacts.active[data-v-62c65e33]{background:#fff;color:#1f91f2}",""]),e.exports=r},348:function(e,t,n){"use strict";n(241)},349:function(e,t,n){var r=n(29)(!1);r.push([e.i,'.wrap-conversations[data-v-00d0ef1e]{height:calc(100vh - 150px)}.wrap-fb-user[data-v-00d0ef1e]{height:80px;line-height:80px;padding-left:15px;padding-right:10px;color:#999;border-bottom:1px solid #f5f5f5;cursor:pointer;position:relative}.wrap-fb-user[data-v-00d0ef1e],.wrap-fb-user[data-v-00d0ef1e]:before{background:#fff;transition:all .2s ease-in-out}.wrap-fb-user[data-v-00d0ef1e]:before{content:"";width:5px;height:60px;position:absolute;border-radius:0 5px 5px 0;left:-5px;top:10px}.wrap-fb-user[data-v-00d0ef1e]:hover{background:#fafafa;padding-left:20px}.wrap-fb-user[data-v-00d0ef1e]:hover:before{background:#ccc;left:0}.wrap-fb-user.unread[data-v-00d0ef1e]{color:#777;font-weight:bolder}.wrap-fb-user.active[data-v-00d0ef1e]{background:#f5f5f5;padding-left:20px}.wrap-fb-user.active[data-v-00d0ef1e]:before{left:0;background:#1f91f2}.wrap-fb-user .name[data-v-00d0ef1e]{float:left;width:150px;height:26px;line-height:26px;margin-top:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.wrap-fb-user .count[data-v-00d0ef1e]{width:20px;height:20px;line-height:20px;text-align:center;margin-top:10px;float:right;color:#fff;background:#f56c6c;border-radius:11px;font-weight:bolder;bottom:10px}.wrap-fb-user .count[data-v-00d0ef1e],.wrap-fb-user .time[data-v-00d0ef1e]{font-size:10px;position:absolute;right:10px}.wrap-fb-user .time[data-v-00d0ef1e]{top:10px;height:26px;line-height:26px;color:#ccc}.wrap-fb-user .snippet[data-v-00d0ef1e]{width:calc(100% - 30px);height:44px;line-height:44px;font-size:14px;color:#999;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.wrap-fb-user.dark[data-v-00d0ef1e]{color:#777;background:#454545;border-bottom:1px solid #777}.wrap-fb-user.dark .name[data-v-00d0ef1e]{color:#ccc}.btn-back[data-v-00d0ef1e]{width:calc(100% - 40px);margin-left:20px;margin-bottom:7px}.btn-back.dark[data-v-00d0ef1e]{background:#454545;border-color:#454545}',""]),e.exports=r},350:function(e,t,n){"use strict";n(242)},351:function(e,t,n){var r=n(29)(!1);r.push([e.i,".wrap-admin-nav[data-v-516369cf]{padding:10px}.wrap-admin-nav a[data-v-516369cf]{display:block;color:#fff;text-decoration:none;text-transform:uppercase;letter-spacing:1px;font-weight:600;transition:all .3s ease-in-out;height:40px;line-height:40px;padding:0 10px;border-radius:8px;margin-bottom:2px;font-size:12px}.wrap-admin-nav a[data-v-516369cf]:hover{padding-left:15px;color:#1f91f2;background:#fff;letter-spacing:3px;font-size:14px}",""]),e.exports=r},352:function(e,t,n){"use strict";n(243)},353:function(e,t,n){var r=n(29)(!1);r.push([e.i,".comp[data-v-f3dd9ce6]{display:inline-block;width:50px;text-align:center;transition:all .3s ease-in-out;cursor:pointer}.comp[data-v-f3dd9ce6]:hover{color:#f56c6c}",""]),e.exports=r},354:function(e,t,n){"use strict";n(244)},355:function(e,t,n){var r=n(29)(!1);r.push([e.i,".page-name[data-v-2a0cadf8]{margin-top:180px;text-align:center;margin-bottom:20px;color:#eee}.page-name .title[data-v-2a0cadf8]{text-transform:uppercase;font-weight:700;margin-bottom:10px}.wrap[data-v-2a0cadf8]{padding:20px;background:#fff;border-radius:10px;max-width:300px;margin:0 auto}",""]),e.exports=r},356:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(22),n(39),"message/"),c={add:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l,param,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=e.commit,l=t.pageId,param=t.param,d={method:"post",url:"".concat(o,"add/").concat(l),data:param,message:{success:"Facebook page added."}},r.next=5,n.$sender(d).then((function(e){e.success&&c("ADD",e.content.data)}));case 5:case"end":return r.stop()}}),r)})))()},browse:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=e.commit,l={method:"get",url:"".concat(o,"browse/").concat(t)},r.next=4,n.$sender(l).then((function(e){e.success&&c("SET",{id:t,data:e.content.data})}));case 4:case"end":return r.stop()}}),r)})))()},edit:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,c={method:"put",url:"".concat(o).concat(param.id,"/edit"),data:param,message:{success:"Facebook page edited."}},n.next=4,t.$sender(c).then((function(e){e.success&&r("EDIT",e.content.data)}));case 4:case"end":return n.stop()}}),n)})))()}};t.default=c},357:function(e,t,n){"use strict";n.r(t),t.default={messages:function(e){return function(t){return e.messages[t]}},messageAll:function(e){return e.messages}}},358:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(37);n(44),n(19),n(14),n(18),n(10),n(23),n(15),n(24);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.default={ADD:function(e,t){var n=t.id,param=t.param;e.pages[n].push(param)},EDIT:function(e,t){e.messages=Object(o.a)(e.pages.map((function(e){return e.id!==t.id?e:l(l({},e),t)})))},SET:function(e,t){var n=t.id,data=t.data;e.messages[n]=data}}},359:function(e,t,n){"use strict";n.r(t),t.default=function(){return{messages:{0:[]}}}},360:function(e,t,n){"use strict";n.r(t),t.default={updateNotification:function(e,data){(0,e.commit)("UPDATE",data)}}},361:function(e,t,n){"use strict";n.r(t),t.default={notifications:function(e){return e.notifications}}},362:function(e,t,n){"use strict";n.r(t),t.default={UPDATE:function(e,t){e.notifications=t}}},363:function(e,t,n){"use strict";n.r(t),t.default=function(){return{notifications:""}}},364:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(39),n(22),"page/"),c={add:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,c={method:"post",url:"".concat(o,"add"),data:param,message:{success:"Facebook page added."}},n.next=4,t.$sender(c).then((function(e){e.success&&r("ADD",e.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},browse:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,c={method:"get",url:"".concat(o,"browse").concat(null!==param?"?with_token=true":""),data:param},n.next=4,t.$sender(c).then((function(e){e.success&&r("SET",e.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},edit:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,c={method:"put",url:"".concat(o).concat(param.id,"/edit"),data:param,message:{success:"Facebook page edited."}},n.next=4,t.$sender(c).then((function(e){e.success&&r("EDIT",e.content.data)}));case 4:case"end":return n.stop()}}),n)})))()}};t.default=c},365:function(e,t,n){"use strict";n.r(t),t.default={pages:function(e){return e.pages}}},366:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(37);n(44),n(19),n(14),n(18),n(10),n(23),n(15),n(24);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.default={ADD:function(e,param){e.pages.push(param)},EDIT:function(e,t){e.pages=Object(o.a)(e.pages.map((function(e){return e.id!==t.id?e:l(l({},e),t)})))},SET:function(e,param){e.pages=param}}},367:function(e,t,n){"use strict";n.r(t),t.default=function(){return{pages:[]}}},368:function(e,t,n){"use strict";n.r(t),t.default={toggleVisualMode:function(e){var t=e.commit;t("TOGGLE_VISUAL_MODE")},setDeviceType:function(e){(0,e.commit)("SET_DEVICE_TYPE")},toggleNavCollapse:function(e){(0,e.commit)("TOGGLE_NAV_COLLAPSE")},setCurrentConversation:function(e,p){(0,e.commit)("SET_CURRENT_CONVERSATION",p)},unsetCurrentConversation:function(e){(0,e.commit)("UNSET_CURRENT_CONVERSATION")}}},369:function(e,t,n){"use strict";n.r(t),t.default={settings:function(e){return e.settings},theme:function(e){return e.settings.visualMode},device:function(e){return e.settings.device},isMobile:function(e){return e.settings.isMobile},navIsCollapsed:function(e){return e.settings.nav.collapse},currentConversation:function(e){return e.settings.nav.currentConversation}}},370:function(e,t,n){"use strict";n.r(t);n(26);t.default={TOGGLE_VISUAL_MODE:function(e){e.settings.visualMode="light"===e.settings.visualMode?"dark":"light"},SET_DEVICE_TYPE:function(e){e.settings.device=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"mobile":"computer",e.settings.isMobile="mobile"===e.settings.device},TOGGLE_NAV_COLLAPSE:function(e){e.settings.nav.collapse=!e.settings.nav.collapse},SET_CURRENT_CONVERSATION:function(e,p){e.settings.nav.currentConversation=p},UNSET_CURRENT_CONVERSATION:function(e){e.settings.nav.currentConversation=""}}},371:function(e,t,n){"use strict";n.r(t),t.default=function(){return{settings:{visualMode:"light",device:"computer",isMobile:!1,nav:{collapse:!1,currentConversation:""}}}}},372:function(e,t,n){"use strict";n.r(t);var r=n(3);n(22);t.default={get:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,o={method:"get",url:"client-statuses/all",data:{}},n.next=4,t.$sender(o).then((function(e){e.success&&r("SET",e.content.data)}));case 4:case"end":return n.stop()}}),n)})))()}}},373:function(e,t,n){"use strict";n.r(t),t.default={statuses:function(e){return e.statuses}}},374:function(e,t,n){"use strict";n.r(t),t.default={SET:function(e,param){e.statuses=param}}},375:function(e,t,n){"use strict";n.r(t),t.default=function(){return{statuses:[]}}},376:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(39),n(22),"user/"),c={add:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,c=e.dispatch,l={method:"post",url:"".concat(o,"add"),data:param,message:{success:"User Added"}},n.next=4,t.$sender(l).then((function(e){e.success&&(r("ADD",e.content.data),c("users"))}));case 4:case"end":return n.stop()}}),n)})))()},users:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,c={method:"get",url:"".concat(o,"users"),data:param},n.next=4,t.$sender(c).then((function(e){e.success&&r("SET",e.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},search:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,c={method:"post",url:"".concat(o,"search"),data:param},n.next=4,t.$sender(c).then((function(e){e.success&&r("SET",e.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},edit:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,c={method:"put",url:"".concat(o).concat(param.id,"/edit"),data:param,message:{success:"Facebook page edited."}},n.next=4,t.$sender(c).then((function(e){e.success&&r("EDIT",e.content.data)}));case 4:case"end":return n.stop()}}),n)})))()},roles:function(e,param){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,t.$sender({method:"get",url:"".concat(o,"roles")}).then((function(e){e.success&&r("SET_ROLES",e.content.data)}));case 3:case"end":return n.stop()}}),n)})))()}};t.default=c},377:function(e,t,n){"use strict";n.r(t),t.default={users:function(e){return e.users},roles:function(e){return e.roles}}},378:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(37);n(44),n(19),n(14),n(18),n(10),n(23),n(15),n(24);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.default={ADD:function(e,param){e.users.push(param)},EDIT:function(e,t){e.pages=Object(o.a)(e.users.map((function(e){return e.id!==t.id?e:l(l({},e),t)})))},SET:function(e,param){e.users=param},SET_ROLES:function(e,param){e.roles=param}}},379:function(e,t,n){"use strict";n.r(t),t.default=function(){return{users:[],roles:[]}}},399:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=399},461:function(e,t,n){"use strict";n.r(t);n(19),n(14),n(23),n(15),n(24);var r=n(3),o=n(5),c=(n(22),n(18),n(10),n(139),n(13));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={data:function(){return{ap:[],visibility:{contactNav:!1},loading:{userPages:!1},data:{userPages:[]}}},fetch:function(){this.getPages(),this.api().getUserPages(this.$auth.user.id)},computed:d(d({},Object(c.c)({pages:"pages/pages"})),{},{activePages:function(){return this.pages.filter((function(p){return p.is_active}))}}),watch:{pages:{handler:function(e,t){this.ap=this.pages.filter((function(p){return p.is_active&&null!==p.access_token}))},deep:!0}},mounted:function(){"id"in this.$route.params&&this.handlePageClick(this.$route.params.id)},methods:d(d({},Object(c.b)({getPages:"pages/browse",setCurrentConversation:"settings/setCurrentConversation",toggleNavCollapse:"settings/toggleNavCollapse"})),{},{handlePageClick:function(p){this.visibility.contactNav=!0,this.$router.push("/pages/"+p)},handleNavClosed:function(){this.visibility.contactNav=!1},api:function(){var e=this;return{getUserPages:function(t){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading.userPages=!0,r={method:"get",url:"user/page/get/"+t},n.next=4,e.$sender(r).then((function(t){e.loading.userPages=!1,e.data.userPages=t.content.data}));case 4:case"end":return n.stop()}}),n)})))()}}},helper:function(){var e=this;return{getPageName:function(t){var n=e.pages.find((function(p){return p.id===t}));return"undefined"!==n?n:{name:"Page"}}}}})},v=(n(346),n(6)),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},[e.visibility.contactNav?e._e():n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.userPages,expression:"loading.userPages"}],staticStyle:{"min-height":"calc(100vh - 80px)"},attrs:{"element-loading-text":"Loading pages...","element-loading-background":"rgba(0, 0, 0, 0.5)"}},e._l(e.data.userPages,(function(p){return n("div",{key:p.id,class:"wrap-contacts "+(p.page_id===parseInt(e.$route.query.page)?"active":""),on:{click:function(t){return e.handlePageClick(p.page_id)}}},[e._v("\n      "+e._s(e.helper().getPageName(p.page_id)?e.helper().getPageName(p.page_id).name:"")+"\n    ")])})),0),e._v(" "),e.visibility.contactNav?n("NavContacts",{on:{navClosed:function(t){return e.handleNavClosed()}}}):e._e()],1)}),[],!1,null,"62c65e33",null);t.default=component.exports;installComponents(component,{NavContacts:n(462).default})},462:function(e,t,n){"use strict";n.r(t);n(19),n(14),n(23),n(24);var r=n(33),o=n(37),c=n(3),l=n(5),d=(n(22),n(139),n(10),n(15),n(44),n(39),n(38),n(86),n(18),n(26),n(74),n(13));function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={data:function(){return{loaded:{messages:!1},filterBy:{statuses:[],responders:[]},filtered:!1,eventData:{},next:null,magicLink:!1,loadMoreLoading:!1,conversations:[],conversation:{},clone:[],activeId:0,sender_id:0,unread_message:0,snippets:[],notification:{sound:"",audio:""},key:0}},computed:v(v({},Object(d.c)({pages:"pages/pages",theme:"settings/theme",navIsCollapsed:"settings/navIsCollapsed"})),{},{currentPage:function(){var e={},data=this.$route.params.id;return void 0!==data&&(e=v({},this.pages.find((function(p){return p.id===parseInt(data)})))),e}}),watch:{conversations:function(e,t){var n=this;0===this.clone.length?this.clone=e:(this.filtered?this.clone.forEach((function(t,r){e.forEach((function(e){t.mid&&t.mid===e.id&&(n.clone[r]=e),t.id&&t.id===e.id&&(n.clone[r]=e)}))})):e.map((function(t,r){return n.clone.forEach((function(e){void 0!==e.unread&&t.id===e.id&&(t.unread=e.unread),t.snippet!==e.snippet&&t.id===e.id&&n.$route.params.psid!==t.senders.data[0].id&&(t.unread="!")})),e})),this.filtered||(this.clone=e),this.key++),this.setClientData()},currentPage:function(e,q){e.id!==q.id&&this.getFbConversations()}},mounted:function(){var e=this;if("magic_link"in this.$route.query){var t={page_id:this.$route.query.page_id,mid:this.$route.query.mid};this.getConversation(t)}"psid"in this.$route.params&&this.reloadConversation(),this.$root.$on("new-message",(function(t){e.getNewMessage(t)})),this.$root.$on("set-status",(function(t){e.setStatus(t)})),this.$root.$on("set-responder",(function(t){e.setResponder(t)})),this.configSound()},methods:v(v({},Object(d.b)({setCurrentConversation:"settings/setCurrentConversation",unsetCurrentConversation:"settings/unsetCurrentConversation",toggleNavCollapse:"settings/toggleNavCollapse"})),{},{handleCancelFilter:function(){this.filterBy.statuses=[],this.filterBy.responders=[],this.filtered=!1,this.getFbConversations(!0)},filter:function(){var e=arguments,t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!(e.length>0&&void 0!==e[0])||e[0],t.filtered=!0,c={statuses:t.filterBy.statuses,responders:t.filterBy.responders},l="client/".concat(t.currentPage.page_id,"/filter"),n.next=6,t.$sender({method:"get",url:t.next&&r?t.next:l,data:c}).then((function(e){t.clone=t.next&&r?[].concat(Object(o.a)(t.clone),Object(o.a)(e.content.data.data)):e.content.data.data,t.next=e.content.data.next_page_url}));case 6:case"end":return n.stop()}}),n)})))()},setStatus:function(e){var t=this;this.clone=this.clone.map((function(n){return n.id===t.$route.params.mid&&(n.status=e),n})),console.log("status",this.clone)},setResponder:function(e){var t=this;this.clone=this.clone.map((function(n){return n.id===t.$route.params.mid&&(n.responder=e),n})),console.log("responder",this.clone)},setClientData:function(){var e=arguments,t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]&&e[0],o=e.length>1&&void 0!==e[1]?e[1]:{},!r){n.next=13;break}if(o.message){n.next=5;break}return n.abrupt("return");case 5:return console.log("set client",t.clone),t.clone=t.clone.map((function(e){return e.id===t.$route.params.mid&&(e.snippet=o.message.text),e})),l=t.clone.find((function(e){return e.id===t.$route.params.mid})),d={participants:l.participants,snippet:l.snippet,updated_time:l.updated_time},n.next=11,t.$sender({method:"put",url:"client/".concat(l.id,"/update-additional-information"),data:{info:d}});case 11:return t.key++,n.abrupt("return");case 13:t.clone.forEach(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={participants:n.participants,snippet:n.snippet,updated_time:n.updated_time},e.next=3,t.$sender({method:"get",url:"client/".concat(n.id,"/getData"),data:{name:n.senders.data[0].name,info:r}}).then((function(e){n.responder=e.content.data.responder,n.status=e.content.data.status,n.unread=0===e.content.data.has_new_message?"":"!",t.key++}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return n.stop()}}),n)})))()},getConversation:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$sender({method:"get",url:"".concat(e.page_id,"/").concat(e.mid,"/conversation"),data:{},headers:{contentType:"application/json"}});case 2:r=n.sent,t.conversation=r.content.data,t.magicLink=!0;case 5:case"end":return n.stop()}}),n)})))()},setClient:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.currentPage.page_id){t.next=2;break}return t.abrupt("return");case 2:if(void 0===e.eventData.entry){t.next=11;break}if((n=e.eventData.entry[0].messaging[0].sender.id)!==e.currentPage.page_id.toString()){t.next=6;break}return t.abrupt("return");case 6:return{},r=v({},e.conversations.find((function(t){return t.participants.data.find((function(p){return p.id!==e.currentPage.page_id})).id===n}))),o={page_index_id:e.$route.params.id,page_id:e.currentPage.page_id,psid:n,mid:r.id},t.next=11,e.$sender({method:"post",url:"/client/set",data:o});case 11:case"end":return t.stop()}}),t)})))()},configSound:function(){this.audio=new Audio("/notification-sound.wav")},handleCloseNav:function(){this.unsetCurrentConversation(),this.conversations=[],this.$router.push("/pages/"),this.$emit("navClosed")},getNewMessage:function(e){var t=JSON.parse(e);if("object"===Object(r.a)(t)){this.eventData=t,this.sender_id=t.entry[0].messaging[0].sender.id;var n=t.entry[0].messaging[0].recipient.id;this.$route.params.psid!==this.sender_id&&this.$route.params.psid!==n?this.getFbConversations(!0):this.setClientData(!0,t.entry[0].messaging[0])}},getFbConversations:function(){var e=arguments,t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.length>0&&void 0!==e[0]&&e[0]||(t.loaded.messages=!1),n.next=4,t.$sender({method:"get",url:"".concat(t.currentPage.page_id,"/conversations"),data:{},headers:{contentType:"application/json"}}).then((function(e){t.conversations=e.content.data.conversations,t.filtered||(t.next=e.content.data.next),t.setClient(),t.audio.play(),t.loaded.messages=!0})).catch((function(e){t.$cg({title:"Facebook get conversations error",type:"error",logs:e})}));case 4:case"end":return n.stop()}}),n)})))()},handleLoadMore:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.filtered){t.next=3;break}return e.filter(),t.abrupt("return");case 3:return e.loadMoreLoading=!0,t.next=6,e.$sender({method:"get",url:"".concat(e.currentPage.page_id,"/conversations?next=").concat(e.next),data:{},headers:{contentType:"application/json"}}).then((function(t){e.conversations=[].concat(Object(o.a)(e.conversations),Object(o.a)(t.content.data.conversations)),e.next=t.content.data.next,e.setClient(),e.loaded.messages=!0,e.loadMoreLoading=!1})).catch((function(t){e.loadMoreLoading=!1,e.$cg({title:"Facebook get conversations error",type:"error",logs:t})}));case 6:case"end":return t.stop()}}),t)})))()},reloadConversation:function(){var e=this,t=this.$route.params;this.$router.push("/pages/"+t.id+"/"+t.mid+"/"+t.psid),this.clone.map((function(n){return n.id===t.mid&&(n.unread=""),e.clone})),this.activeId=t.mid},readNewMessage:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.unread="",n.next=3,t.$sender({method:"put",url:"client/".concat(e.mid?e.mid:e.id,"/read-message")});case 3:case"end":return n.stop()}}),n)})))()},handleConversationClick:function(e){var t=this;this.readNewMessage(e),this.clone.map((function(n){return n.id===e.id&&(n.unread="",n.has_new_message=0),t.clone})),this.key++;var p=[];if(e.mid){this.activeId=e.mid;var n=JSON.parse(e.additional_information);p=n.participants.data,this.setCurrentConversation(n.participants.data[0].name)}else this.activeId=e.id,p=e.participants.data,this.setCurrentConversation(e.participants.data[0].name);var r=p.filter((function(p){return p.id!==t.currentPage.page_id+""}));if(this.$route.params.psid===r[0].id){var o=this.$createElement;this.$notify({message:o("i",{style:"color: teal"},"You click the same conversation.")})}else e.mid?this.$router.replace("/pages/"+this.currentPage.id+"/"+e.mid+"/"+r[0].id):this.$router.replace("/pages/"+this.currentPage.id+"/"+e.id+"/"+r[0].id)},convertRelativeTime:function(e){var t=(new Date).getTime(),n=new Date(e).getTime(),r=Math.floor((t-n)/1e3);return r<1?"0s":r<60?"".concat(r,"s"):r<3600?"".concat(Math.floor(r/60),"m"):r<86400?"".concat(Math.floor(r/3600),"h"):r<604800?"".concat(Math.floor(r/86400),"d"):void 0}})},m=h,w=(n(348),n(6)),component=Object(w.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.loaded.messages,expression:"!loaded.messages"}],staticStyle:{"margin-top":"-10px"},attrs:{"element-loading-background":"rgb(238, 238, 238)"}},[n("div",{staticClass:"filter",staticStyle:{height:"50px"}},[n("div",{staticStyle:{float:"right","padding-right":"10px"}},[n("ElmDropdownFilterStatus",{attrs:{statuses:e.filterBy.statuses},on:{status:function(param){e.filterBy.statuses=param,e.filter(!1)}}})],1),e._v(" "),n("div",{staticStyle:{float:"right","padding-right":"10px"}},[n("ElmDropdownFilterResponder",{attrs:{responders:e.filterBy.responders},on:{responders:function(param){e.filterBy.responders=param,e.filter(!1)}}})],1)]),e._v(" "),e.magicLink?n("div",{key:e.key,staticClass:"wrap-conversations is-magiclink"},[n("div",{class:"wrap-fb-user "+(e.conversation.unread_count>0?"unread":"")+" active "+e.theme},[n("span",{staticClass:"name"},[e._v("\n        "+e._s(e.conversation.senders.data[0].name)+"\n      ")]),e._v(" "),n("div",{staticClass:"time"},[e._v("\n        "+e._s(e.convertRelativeTime(e.conversation.updated_time))+"\n      ")])])]):n("div",{key:e.key,staticClass:"wrap-conversations not-magiclink"},[e._l(e.clone,(function(t){return n("div",{key:t.id,class:"wrap-fb-user "+(void 0!==t.unread&&""!==t.unread?"unread":"")+"\n      "+(void 0!==t.has_new_message&&0!==t.has_new_message?"unread":"")+"\n       "+(e.filtered?t.mid===e.activeId?"active":"":t.id===e.activeId?"active":"")+" "+e.theme,on:{click:function(n){return e.handleConversationClick(t)}}},[n("span",{staticClass:"name",staticStyle:{"font-weight":"bolder"}},[t.status&&1===t.status?n("i",{staticClass:"el-icon-user-solid",staticStyle:{color:"#67C23A"}}):e._e(),e._v(" "),t.status&&2===t.status?n("i",{staticClass:"el-icon-user-solid",staticStyle:{color:"#E6A23C"}}):e._e(),e._v(" "),t.status&&3===t.status?n("i",{staticClass:"el-icon-user-solid",staticStyle:{color:"#F56C6C"}}):e._e(),e._v(" "),t.status?e._e():n("i",{staticClass:"el-icon-user"}),e._v("\n        "+e._s(t.senders?t.senders.data[0].name:t.name?t.name:"")+"\n      ")]),e._v(" "),n("div",{staticClass:"time",staticStyle:{"text-align":"right"}},[e._v("\n        "+e._s(t.updated_time?e.convertRelativeTime(t.updated_time):t.additional_information?e.convertRelativeTime(JSON.parse(t.additional_information).updated_time):"")+"\n        "),n("p",[e._v("\n          "+e._s(t.responder?t.responder.name:"Please respond.")+"\n        ")])]),e._v(" "),void 0!==t.unread&&""!==t.unread||void 0!==t.has_new_message&&0!==t.has_new_message?n("span",{staticClass:"count"},[e._v("\n        "+e._s(t.unread?t.unread:t.has_new_message?0===t.has_new_message?"":"!":"")+"\n      ")]):e._e(),e._v(" "),n("div",{staticStyle:{clear:"both"}}),e._v(" "),n("div",{staticClass:"snippet"},[e._v("\n        "+e._s(t.snippet?t.snippet:t.additional_information?JSON.parse(t.additional_information).snippet:"")+"\n      ")])])})),e._v(" "),e.next?n("el-button",{class:"btn-back "+e.theme,staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{type:"default",size:"small",loading:e.loadMoreLoading},on:{click:e.handleLoadMore}},[e._v("\n      Load More\n    ")]):e._e()],2),e._v(" "),e.magicLink?n("el-button",{class:"btn-back "+e.theme,attrs:{type:"default",size:"small"},on:{click:function(t){e.magicLink=!1}}},[e._v("\n    Show other conversations\n  ")]):e._e(),e._v(" "),e.filtered?n("el-button",{class:"btn-back "+e.theme,attrs:{type:"default",size:"small"},on:{click:e.handleCancelFilter}},[e._v("\n    Cancel Filter\n  ")]):n("el-button",{class:"btn-back "+e.theme,attrs:{type:"default",size:"small"},on:{click:e.handleCloseNav}},[e._v("\n    Back\n  ")])],1)}),[],!1,null,"00d0ef1e",null);t.default=component.exports;installComponents(component,{ElmDropdownFilterStatus:n(463).default,ElmDropdownFilterResponder:n(464).default})},463:function(e,t,n){"use strict";n.r(t);n(19),n(14),n(18),n(10),n(23),n(15),n(24);var r=n(5),o=n(13);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var l={props:{statuses:{type:Array,default:function(){return[]}}},data:function(){return{key:0,selectedStatuses:this.statuses}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)({client_status:"statuses/statuses"})),watch:{statuses:function(e,t){this.selectedStatuses=e}},methods:{handleChange:function(){this.$emit("status",this.selectedStatuses)}}},d=l,f=n(6),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.key},[n("el-select",{style:{width:"200px",padding:"0px"},attrs:{multiple:"","collapse-tags":"",clearable:"",placeholder:"Select status"},on:{change:e.handleChange},model:{value:e.selectedStatuses,callback:function(t){e.selectedStatuses=t},expression:"selectedStatuses"}},e._l(e.client_status,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)}),[],!1,null,"08b02362",null);t.default=component.exports},464:function(e,t,n){"use strict";n.r(t);n(19),n(14),n(18),n(10),n(23),n(15),n(24);var r=n(5),o=n(13);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var l={props:{responders:{type:Array,default:function(){return[]}}},data:function(){return{key:0,drawer:!1,direction:"ttb",selectedResponders:this.responders}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.c)({getResponders:"users/users",isMobile:"settings/isMobile"})),watch:{responders:function(e,t){this.selectedResponders=e}},methods:{handleFilter:function(){this.$emit("responders",this.selectedResponders),this.drawer=!1},handleCancel:function(){this.selectedResponders=[],this.drawer=!1},handleClose:function(e){this.$confirm("Are you sure you want to close this?").then((function(t){e()})).catch((function(e){}))}}},d=l,f=n(6),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.key},[n("el-tooltip",{attrs:{effect:"dark",content:"Select responder.",placement:"bottom"}},[n("el-button",{staticStyle:{"background-color":"white"},attrs:{icon:"el-icon-sort"},on:{click:function(t){e.drawer=!0}}})],1),e._v(" "),n("el-drawer",{staticClass:"drawer",attrs:{title:"Select Responders",visible:e.drawer,direction:e.direction,"before-close":e.handleClose,size:"100vh"},on:{"update:visible":function(t){e.drawer=t}}},[n("div",[n("el-row",[n("el-checkbox-group",{model:{value:e.selectedResponders,callback:function(t){e.selectedResponders=t},expression:"selectedResponders"}},e._l(e.getResponders,(function(t){return n("el-col",{key:t.id,attrs:{span:parseInt(e.isMobile?12:6)}},[n("div",{staticStyle:{padding:"20px 20px 20px 40px"}},[n("el-checkbox",{attrs:{border:"",label:t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])],1)])})),1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24,offset:0}},[n("div",{staticStyle:{"text-align":"right",padding:"60px"}},[n("el-button",{attrs:{type:"default",size:"default"},on:{click:e.handleCancel}},[e._v("\n              Cancel\n            ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"default"},on:{click:e.handleFilter}},[e._v("\n              Filter\n            ")])],1)])],1)],1)])],1)}),[],!1,null,null,null);t.default=component.exports},465:function(e,t,n){"use strict";n.r(t);var r={data:function(){return{navs:[{index:1,name:"dashboard",to:"/admin/dashboard"},{index:2,name:"users",to:"/admin/users"},{index:3,name:"pages",to:"/admin/pages"},{index:4,name:"settings",to:"/admin/settings"}]}}},o=(n(350),n(6)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap-admin-nav"},e._l(e.navs,(function(nav){return n("NuxtLink",{key:nav.index,attrs:{to:nav.to}},[e._v("\n    "+e._s(nav.name)+"\n  ")])})),1)}),[],!1,null,"516369cf",null);t.default=component.exports},466:function(e,t,n){"use strict";n.r(t);n(19),n(14),n(18),n(10),n(23),n(15),n(24);var r=n(3),o=n(5),c=(n(39),n(22),n(13));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d={data:function(){return{client:{},key:0}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.c)({client_status:"statuses/statuses"})),watch:{"$route.params":function(e,t){e&&this.$route.params.mid&&this.getClient()}},mounted:function(){this.getClient()},methods:{getClient:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$sender({method:"get",url:"client/".concat(e.$route.params.mid,"/getClient"),data:{}}).then((function(t){e.client=t.content.data,e.key++}));case 2:case"end":return t.stop()}}),t)})))()},handleClick:function(param){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$sender({method:"put",url:"client/".concat(e.$route.params.mid,"/").concat(param,"/set-status"),data:{}}).then((function(t){e.client=t.content.data,console.log(e.client),e.$root.$emit("set-status",e.client.status),e.key++}));case 2:case"end":return t.stop()}}),t)})))()}}},f=d,v=n(6),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dropdown",{key:e.key,on:{command:e.handleClick}},[n("el-button",{attrs:{type:"primary"}},[e._v("\n      "+e._s(e.client.client_status?e.client.client_status.name:"Status unset")+"\n      "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.client_status,(function(t){return n("el-dropdown-item",{key:t.id,attrs:{command:t.id}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},467:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(38),n(22),{data:function(){return{retrieved:!1,page:{},userPage:{},loading:!1}},watch:{"$route.query":function(e,t){void 0!==e.page&&this.getPageName()}},mounted:function(){var e=this;void 0!==this.$route.query.page&&this.getPageName(),this.$root.$on("PageJoined",(function(data){e.getPageName()})),this.$root.$on("PageChanged",(function(p){e.userPage=p}))},methods:{getPageName:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"get",url:"page/".concat(e.$route.query.page,"/view")},t.next=3,e.$sender(n).then((function(t){e.page=t.content.data,e.checkUserPageExists(e.page.id)}));case 3:case"end":return t.stop()}}),t)})))()},checkUserPageExists:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"get",url:"user/page/exists/".concat(e)},n.next=3,t.$sender(r).then((function(e){t.userPage=e.content.data,t.retrieved=!0}));case 3:case"end":return n.stop()}}),n)})))()},handlePageDropdownCommand:function(e){"leavePage"===e&&this.leavePage()},leavePage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"put",url:"user/page/edit/".concat(e.$route.query.page),message:{success:"You have left ".concat(e.page.name)}},t.next=3,e.$sender(n).then((function(t){e.$router.push("/pages")}));case 3:case"end":return t.stop()}}),t)})))()}}}),c=n(6),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticStyle:{float:"left"}},[e._v("\n  "+e._s(e.page.name)+"\n")])}),[],!1,null,null,null);t.default=component.exports},468:function(e,t,n){"use strict";n.r(t);var r={methods:{handleClick:function(){var e=this;this.$auth.logout().then((function(t){e.$router.push("/")}))}}},o=(n(352),n(6)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comp",on:{click:e.handleClick}},[n("i",{staticClass:"el-icon-switch-button"})])}),[],!1,null,"f3dd9ce6",null);t.default=component.exports},56:function(e,t,n){"use strict";var r={layout:"app",props:["error"],mounted:function(){console.error(this.error)}},o=n(6),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",staticStyle:{"text-align":"center"}},[n("h1",{staticStyle:{"font-size":"48px",margin:"50px auto",color:"#F56C6C","margin-top":"100px"}},[n("i",{class:404===e.error.statusCode?"el-icon-document-delete":"el-icon-error"})]),e._v(" "),n("h1",{staticStyle:{"font-size":"46px",margin:"0 auto",color:"#ccc"}},[e._v("\n    Toink!\n    "),n("br"),e._v("\n    "+e._s(404===e.error.statusCode?"Page not found.":"An error occurred.")+"\n  ")]),e._v(" "),n("h1",{staticStyle:{"font-size":"60px",margin:"50px auto",color:"#ccc"}},[e._v("\n    "+e._s(e.error.statusCode)+"\n  ")]),e._v(" "),n("p",{staticStyle:{color:"#999"}},[e._v("\n    "+e._s(e.error.message)+"\n  ")]),e._v(" "),n("NuxtLink",{attrs:{to:"/"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-s-home"}},[e._v("\n      Back to Home\n    ")])],1)],1)}),[],!1,null,null,null);t.a=component.exports}},[[286,24,2,25]]]);